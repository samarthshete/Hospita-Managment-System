/*

 === Sylvester ===
 Vector and Matrix mathematics modules for JavaScript
 Copyright (c) 2007 James Coglan

 Permission is hereby granted, free of charge, to any person obtaining
 a copy of this software and associated documentation files (the "Software"),
 to deal in the Software without restriction, including without limitation
 the rights to use, copy, modify, merge, publish, distribute, sublicense,
 and/or sell copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included
 in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 DEALINGS IN THE SOFTWARE.
*/
var m={version:"0.1.3",precision:1E-6};function Vector(){}
Vector.prototype={e:function(a){return 1>a||a>this.elements.length?null:this.elements[a-1]},Z:function(){return this.elements.length},j:function(){return Math.sqrt(this.K(this))},B:function(a){var b=this.elements.length;a=a.elements||a;if(b!=a.length)return!1;do if(Math.abs(this.elements[b-1]-a[b-1])>m.precision)return!1;while(--b);return!0},g:function(){return Vector.create(this.elements)},map:function(a){var b=[];this.A(function(c,d){b.push(a(c,d))});return Vector.create(b)},A:function(a){var b=
this.elements.length,c=b,d;do d=c-b,a(this.elements[d],d+1);while(--b)},P:function(){var a=this.j();return 0===a?this.g():this.map(function(b){return b/a})},m:function(a){var b=a.elements||a;a=this.elements.length;if(a!=b.length)return null;var c=0,d=0,e=0;this.A(function(a,f){c+=a*b[f-1];d+=a*a;e+=b[f-1]*b[f-1]});d=Math.sqrt(d);e=Math.sqrt(e);if(0===d*e)return null;a=c/(d*e);-1>a&&(a=-1);1<a&&(a=1);return Math.acos(a)},c:function(a){a=this.m(a);return null===a?null:a<=m.precision},pa:function(a){a=
this.m(a);return null===a?null:Math.abs(a-Math.PI)<=m.precision},M:function(a){a=this.K(a);return null===a?null:Math.abs(a)<=m.precision},add:function(a){var b=a.elements||a;return this.elements.length!=b.length?null:this.map(function(a,d){return a+b[d-1]})},ca:function(a){var b=a.elements||a;return this.elements.length!=b.length?null:this.map(function(a,d){return a-b[d-1]})},multiply:function(a){return this.map(function(b){return b*a})},x:function(a){return this.multiply(a)},K:function(a){a=a.elements||
a;var b=0,c=this.elements.length;if(c!=a.length)return null;do b+=this.elements[c-1]*a[c-1];while(--c);return b},H:function(a){a=a.elements||a;if(3!=this.elements.length||3!=a.length)return null;var b=this.elements;return Vector.create([b[1]*a[2]-b[2]*a[1],b[2]*a[0]-b[0]*a[2],b[0]*a[1]-b[1]*a[0]])},max:function(){var a=0,b=this.elements.length,c=b,d;do d=c-b,Math.abs(this.elements[d])>Math.abs(a)&&(a=this.elements[d]);while(--b);return a},indexOf:function(a){var b=null,c=this.elements.length,d=c,
e;do e=d-c,null===b&&this.elements[e]==a&&(b=e+1);while(--c);return b},ua:function(){return Matrix.R(this.elements)},round:function(){return this.map(function(a){return Math.round(a)})},ba:function(a){return this.map(function(b){return Math.abs(b-a)<=m.precision?a:b})},f:function(a){if(a.anchor)return a.f(this);var b=a.elements||a;if(b.length!=this.elements.length)return null;var c=0,d;this.A(function(a,g){d=a-b[g-1];c+=d*d});return Math.sqrt(c)},qa:function(a){return a.contains(this)},$:function(a){return a.contains(this)},
rotate:function(a,b){var c,d,e;switch(this.elements.length){case 2:c=b.elements||b;if(2!=c.length)return null;a=Matrix.s(a).elements;b=this.elements[0]-c[0];d=this.elements[1]-c[1];return Vector.create([c[0]+a[0][0]*b+a[0][1]*d,c[1]+a[1][0]*b+a[1][1]*d]);case 3:if(!b.direction)return null;c=b.h(this).elements;a=Matrix.s(a,b.direction).elements;b=this.elements[0]-c[0];d=this.elements[1]-c[1];e=this.elements[2]-c[2];return Vector.create([c[0]+a[0][0]*b+a[0][1]*d+a[0][2]*e,c[1]+a[1][0]*b+a[1][1]*d+a[1][2]*
e,c[2]+a[2][0]*b+a[2][1]*d+a[2][2]*e]);default:return null}},l:function(a){if(a.anchor){var b=this.elements.slice();a=a.h(b).elements;return Vector.create([a[0]+(a[0]-b[0]),a[1]+(a[1]-b[1]),a[2]+(a[2]-(b[2]||0))])}var c=a.elements||a;return this.elements.length!=c.length?null:this.map(function(a,b){return c[b-1]+(c[b-1]-a)})},v:function(){var a=this.g();switch(a.elements.length){case 3:break;case 2:a.elements.push(0);break;default:return null}return a},L:function(){return"["+this.elements.join(", ")+
"]"},F:function(a){this.elements=(a.elements||a).slice();return this}};Vector.create=function(a){var b=new Vector;return b.F(a)};Vector.C=Vector.create([1,0,0]);Vector.D=Vector.create([0,1,0]);Vector.k=Vector.create([0,0,1]);Vector.S=function(a){var b=[];do b.push(Math.random());while(--a);return Vector.create(b)};Vector.b=function(a){var b=[];do b.push(0);while(--a);return Vector.create(b)};function Matrix(){}
Matrix.prototype={e:function(a,b){return 1>a||a>this.elements.length||1>b||b>this.elements[0].length?null:this.elements[a-1][b-1]},ta:function(a){return a>this.elements.length?null:Vector.create(this.elements[a-1])},Y:function(a){if(a>this.elements[0].length)return null;var b=[],c=this.elements.length,d=c,e;do e=d-c,b.push(this.elements[e][a-1]);while(--c);return Vector.create(b)},Z:function(){return{rows:this.elements.length,cols:this.elements[0].length}},rows:function(){return this.elements.length},
cols:function(){return this.elements[0].length},B:function(a){a=a.elements||a;"undefined"==typeof a[0][0]&&(a=Matrix.create(a).elements);if(this.elements.length!=a.length||this.elements[0].length!=a[0].length)return!1;var b=this.elements.length,c=b,d,e,g=this.elements[0].length,f;do{d=c-b;e=g;do if(f=g-e,Math.abs(this.elements[d][f]-a[d][f])>m.precision)return!1;while(--e)}while(--b);return!0},g:function(){return Matrix.create(this.elements)},map:function(a){var b=[],c=this.elements.length,d=c,e,
g,f=this.elements[0].length,h;do{e=d-c;g=f;b[e]=[];do h=f-g,b[e][h]=a(this.elements[e][h],e+1,h+1);while(--g)}while(--c);return Matrix.create(b)},N:function(a){a=a.elements||a;"undefined"==typeof a[0][0]&&(a=Matrix.create(a).elements);return this.elements.length==a.length&&this.elements[0].length==a[0].length},add:function(a){var b=a.elements||a;"undefined"==typeof b[0][0]&&(b=Matrix.create(b).elements);return this.N(b)?this.map(function(a,d,e){return a+b[d-1][e-1]}):null},ca:function(a){var b=a.elements||
a;"undefined"==typeof b[0][0]&&(b=Matrix.create(b).elements);return this.N(b)?this.map(function(a,d,e){return a-b[d-1][e-1]}):null},X:function(a){a=a.elements||a;"undefined"==typeof a[0][0]&&(a=Matrix.create(a).elements);return this.elements[0].length==a.length},multiply:function(a){if(!a.elements)return this.map(function(b){return b*a});var b=a.j?!0:!1,c=a.elements||a;"undefined"==typeof c[0][0]&&(c=Matrix.create(c).elements);if(!this.X(c))return null;var d=this.elements.length,e=d,g,f,h=c[0].length,
k,l=this.elements[0].length,q=[],r,t,u;do{g=e-d;q[g]=[];f=h;do{k=h-f;r=0;t=l;do u=l-t,r+=this.elements[g][u]*c[u][k];while(--t);q[g][k]=r}while(--f)}while(--d);c=Matrix.create(q);return b?c.Y(1):c},x:function(a){return this.multiply(a)},ra:function(a,b,c,d){var e=[],g=c,f,h,k,l=this.elements.length,q=this.elements[0].length;do{f=c-g;e[f]=[];h=d;do k=d-h,e[f][k]=this.elements[(a+f-1)%l][(b+k-1)%q];while(--h)}while(--g);return Matrix.create(e)},xa:function(){var a=this.elements.length,b=this.elements[0].length,
c=[],d=b,e,g,f;do{e=b-d;c[e]=[];g=a;do f=a-g,c[e][f]=this.elements[f][e];while(--g)}while(--d);return Matrix.create(c)},o:function(){return this.elements.length==this.elements[0].length},max:function(){var a=0,b=this.elements.length,c=b,d,e,g=this.elements[0].length,f;do{d=c-b;e=g;do f=g-e,Math.abs(this.elements[d][f])>Math.abs(a)&&(a=this.elements[d][f]);while(--e)}while(--b);return a},indexOf:function(a){var b=this.elements.length,c=b,d,e,g=this.elements[0].length,f;do{d=c-b;e=g;do if(f=g-e,this.elements[d][f]==
a)return{C:d+1,D:f+1};while(--e)}while(--b);return null},na:function(){if(!this.o)return null;var a=[],b=this.elements.length,c=b,d;do d=c-b,a.push(this.elements[d][d]);while(--b);return Vector.create(a)},w:function(){var a=this.g(),b,c=this.elements.length,d=c,e,g,f=this.elements[0].length,h;do{e=d-c;if(0==a.elements[e][e])for(var k=e+1;k<d;k++)if(0!=a.elements[k][e]){b=[];g=f;do h=f-g,b.push(a.elements[e][h]+a.elements[k][h]);while(--g);a.elements[e]=b;break}if(0!=a.elements[e][e])for(k=e+1;k<d;k++){var l=
a.elements[k][e]/a.elements[e][e];b=[];g=f;do h=f-g,b.push(h<=e?0:a.elements[k][h]-a.elements[e][h]*l);while(--g);a.elements[k]=b}}while(--c);return a},va:function(){return this.w()},J:function(){if(!this.o())return null;var a=this.w(),b=a.elements[0][0],c=a.elements.length-1,d=c,e;do e=d-c+1,b*=a.elements[e][e];while(--c);return b},ma:function(){return this.J()},O:function(){return this.o()&&0===this.J()},trace:function(){if(!this.o())return null;var a=this.elements[0][0],b=this.elements.length-
1,c=b,d;do d=c-b+1,a+=this.elements[d][d];while(--b);return a},wa:function(){return this.trace()},aa:function(){var a=this.w(),b=0,c=this.elements.length,d=c,e,g,f=this.elements[0].length,h;do{e=d-c;g=f;do if(h=f-g,Math.abs(a.elements[e][h])>m.precision){b++;break}while(--g)}while(--c);return b},sa:function(){return this.aa()},W:function(a){a=a.elements||a;"undefined"==typeof a[0][0]&&(a=Matrix.create(a).elements);var b=this.g(),c=b.elements[0].length,d=b.elements.length,e=d,g,f,h=a[0].length,k;if(d!=
a.length)return null;do{g=e-d;f=h;do k=h-f,b.elements[g][c+k]=a[g][k];while(--f)}while(--d);return b},inverse:function(){if(!this.o()||this.O())return null;var a=this.elements.length,b=a,c,d,e=this.W(Matrix.I(a)).w(),g,f=e.elements[0].length,h,k,l=[],q;do{c=a-1;k=[];g=f;l[c]=[];d=e.elements[c][c];do h=f-g,q=e.elements[c][h]/d,k.push(q),h>=b&&l[c].push(q);while(--g);e.elements[c]=k;for(d=0;d<c;d++){k=[];g=f;do h=f-g,k.push(e.elements[d][h]-e.elements[c][h]*e.elements[d][c]);while(--g);e.elements[d]=
k}}while(--a);return Matrix.create(l)},oa:function(){return this.inverse()},round:function(){return this.map(function(a){return Math.round(a)})},ba:function(a){return this.map(function(b){return Math.abs(b-a)<=m.precision?a:b})},L:function(){var a=[],b=this.elements.length,c=b,d;do d=c-b,a.push(Vector.create(this.elements[d]).L());while(--b);return a.join("\n")},F:function(a){var b=a.elements||a;if("undefined"!=typeof b[0][0]){var c=b.length,d=c,e,g,f;this.elements=[];do{a=d-c;g=e=b[a].length;this.elements[a]=
[];do f=g-e,this.elements[a][f]=b[a][f];while(--e)}while(--c);return this}d=c=b.length;this.elements=[];do a=d-c,this.elements.push([b[a]]);while(--c);return this}};Matrix.create=function(a){var b=new Matrix;return b.F(a)};Matrix.I=function(a){var b=[],c=a,d,e,g;do{d=c-a;b[d]=[];e=c;do g=c-e,b[d][g]=d==g?1:0;while(--e)}while(--a);return Matrix.create(b)};Matrix.R=function(a){var b=a.length,c=b,d,e=Matrix.I(b);do d=c-b,e.elements[d][d]=a[d];while(--b);return e};
Matrix.s=function(a,b){if(!b)return Matrix.create([[Math.cos(a),-Math.sin(a)],[Math.sin(a),Math.cos(a)]]);var c=b.g();if(3!=c.elements.length)return null;var d=c.j();b=c.elements[0]/d;var e=c.elements[1]/d,c=c.elements[2]/d,d=Math.sin(a);a=Math.cos(a);var g=1-a;return Matrix.create([[g*b*b+a,g*b*e-d*c,g*b*c+d*e],[g*b*e+d*c,g*e*e+a,g*e*c-d*b],[g*b*c-d*e,g*e*c+d*b,g*c*c+a]])};Matrix.da=function(a){var b=Math.cos(a);a=Math.sin(a);return Matrix.create([[1,0,0],[0,b,-a],[0,a,b]])};
Matrix.ea=function(a){var b=Math.cos(a);a=Math.sin(a);return Matrix.create([[b,0,a],[0,1,0],[-a,0,b]])};Matrix.fa=function(a){var b=Math.cos(a);a=Math.sin(a);return Matrix.create([[b,-a,0],[a,b,0],[0,0,1]])};Matrix.S=function(a,b){return Matrix.b(a,b).map(function(){return Math.random()})};Matrix.b=function(a,b){var c=[],d=a,e,g,f;do{e=a-d;c[e]=[];g=b;do f=b-g,c[e][f]=0;while(--g)}while(--d);return Matrix.create(c)};function n(){}
n.prototype={B:function(a){return this.c(a)&&this.contains(a.anchor)},g:function(){return n.create(this.anchor,this.direction)},translate:function(a){a=a.elements||a;return n.create([this.anchor.elements[0]+a[0],this.anchor.elements[1]+a[1],this.anchor.elements[2]+(a[2]||0)],this.direction)},c:function(a){if(a.a)return a.c(this);a=this.direction.m(a.direction);return Math.abs(a)<=m.precision||Math.abs(a-Math.PI)<=m.precision},f:function(a){if(a.a)return a.f(this);if(a.direction){if(this.c(a))return this.f(a.anchor);
var b=this.direction.H(a.direction).P().elements,c=this.anchor.elements;a=a.anchor.elements;return Math.abs((c[0]-a[0])*b[0]+(c[1]-a[1])*b[1]+(c[2]-a[2])*b[2])}var d=a.elements||a,c=this.anchor.elements,b=this.direction.elements;a=d[0]-c[0];var e=d[1]-c[1],d=(d[2]||0)-c[2],c=Math.sqrt(a*a+e*e+d*d);if(0===c)return 0;b=(a*b[0]+e*b[1]+d*b[2])/c;b=1-b*b;return Math.abs(c*Math.sqrt(0>b?0:b))},contains:function(a){a=this.f(a);return null!==a&&a<=m.precision},$:function(a){return a.contains(this)},i:function(a){return a.a?
a.i(this):!this.c(a)&&this.f(a)<=m.precision},u:function(a){if(a.a)return a.u(this);if(!this.i(a))return null;var b=this.anchor.elements,c=this.direction.elements,d=a.anchor.elements,e=a.direction.elements;a=c[0];var g=c[1],c=c[2],f=e[0],h=e[1],e=e[2],k=b[0]-d[0],l=b[1]-d[1],q=b[2]-d[2],d=-a*k-g*l-c*q,k=f*k+h*l+e*q,l=a*a+g*g+c*c,q=f*f+h*h+e*e,f=a*f+g*h+c*e,f=(d*q/l+f*k)/(q-f*f);return Vector.create([b[0]+f*a,b[1]+f*g,b[2]+f*c])},h:function(a){if(a.direction){if(this.i(a))return this.u(a);if(this.c(a))return null;
var b=this.direction.elements,c=a.direction.elements,d=b[0],e=b[1],b=b[2],g=c[0],f=c[1],h=c[2],c=b*g-d*h,k=d*f-e*g,l=e*h-b*f,d=Vector.create([c*h-k*f,k*g-l*h,l*f-c*g]);a=p.create(a.anchor,d);return a.u(this)}a=a.elements||a;if(this.contains(a))return Vector.create(a);c=this.anchor.elements;b=this.direction.elements;d=b[0];e=b[1];b=b[2];g=c[0];k=c[1];f=c[2];c=d*(a[1]-k)-e*(a[0]-g);k=e*((a[2]||0)-f)-b*(a[1]-k);l=b*(a[0]-g)-d*((a[2]||0)-f);d=Vector.create([e*c-b*l,b*k-d*c,d*l-e*k]);e=this.f(a)/d.j();
return Vector.create([a[0]+d.elements[0]*e,a[1]+d.elements[1]*e,(a[2]||0)+d.elements[2]*e])},rotate:function(a,b){"undefined"==typeof b.direction&&(b=n.create(b.v(),Vector.k));a=Matrix.s(a,b.direction).elements;var c=b.h(this.anchor).elements,d=this.anchor.elements;b=this.direction.elements;var e=c[0],g=c[1],c=c[2],f=d[0],h=d[1],d=d[2],f=f-e,h=h-g,d=d-c;return n.create([e+a[0][0]*f+a[0][1]*h+a[0][2]*d,g+a[1][0]*f+a[1][1]*h+a[1][2]*d,c+a[2][0]*f+a[2][1]*h+a[2][2]*d],[a[0][0]*b[0]+a[0][1]*b[1]+a[0][2]*
b[2],a[1][0]*b[0]+a[1][1]*b[1]+a[1][2]*b[2],a[2][0]*b[0]+a[2][1]*b[1]+a[2][2]*b[2]])},l:function(a){if(a.a){var b=this.anchor.elements,c=this.direction.elements,d=b[0],e=b[1],b=b[2],g=c[0],f=c[1],h=c[2],c=this.anchor.l(a).elements,d=d+g,e=e+f,b=b+h;a=a.h([d,e,b]).elements;a=[a[0]+(a[0]-d)-c[0],a[1]+(a[1]-e)-c[1],a[2]+(a[2]-b)-c[2]];return n.create(c,a)}if(a.direction)return this.rotate(Math.PI,a);a=a.elements||a;return n.create(this.anchor.l([a[0],a[1],a[2]||0]),this.direction)},G:function(a,b){a=
Vector.create(a);b=Vector.create(b);2==a.elements.length&&a.elements.push(0);2==b.elements.length&&b.elements.push(0);if(3<a.elements.length||3<b.elements.length)return null;var c=b.j();if(0===c)return null;this.anchor=a;this.direction=Vector.create([b.elements[0]/c,b.elements[1]/c,b.elements[2]/c]);return this}};n.create=function(a,b){var c=new n;return c.G(a,b)};n.ga=n.create(Vector.b(3),Vector.C);n.ia=n.create(Vector.b(3),Vector.D);n.ka=n.create(Vector.b(3),Vector.k);function p(){}
p.prototype={B:function(a){return this.contains(a.anchor)&&this.c(a)},g:function(){return p.create(this.anchor,this.a)},translate:function(a){a=a.elements||a;return p.create([this.anchor.elements[0]+a[0],this.anchor.elements[1]+a[1],this.anchor.elements[2]+(a[2]||0)],this.a)},c:function(a){return a.a?(a=this.a.m(a.a),Math.abs(a)<=m.precision||Math.abs(Math.PI-a)<=m.precision):a.direction?this.a.M(a.direction):null},M:function(a){a=this.a.m(a.a);return Math.abs(Math.PI/2-a)<=m.precision},f:function(a){if(this.i(a)||
this.contains(a))return 0;if(a.anchor){var b=this.anchor.elements,c=a.anchor.elements;a=this.a.elements;return Math.abs((b[0]-c[0])*a[0]+(b[1]-c[1])*a[1]+(b[2]-c[2])*a[2])}c=a.elements||a;b=this.anchor.elements;a=this.a.elements;return Math.abs((b[0]-c[0])*a[0]+(b[1]-c[1])*a[1]+(b[2]-(c[2]||0))*a[2])},contains:function(a){if(a.a)return null;if(a.direction)return this.contains(a.anchor)&&this.contains(a.anchor.add(a.direction));a=a.elements||a;var b=this.anchor.elements,c=this.a.elements;a=Math.abs(c[0]*
(b[0]-a[0])+c[1]*(b[1]-a[1])+c[2]*(b[2]-(a[2]||0)));return a<=m.precision},i:function(a){return"undefined"==typeof a.direction&&"undefined"==typeof a.a?null:!this.c(a)},u:function(a){if(!this.i(a))return null;if(a.direction){var b=a.anchor.elements,c=a.direction.elements;a=this.anchor.elements;var d=this.a.elements;a=(d[0]*(a[0]-b[0])+d[1]*(a[1]-b[1])+d[2]*(a[2]-b[2]))/(d[0]*c[0]+d[1]*c[1]+d[2]*c[2]);return Vector.create([b[0]+c[0]*a,b[1]+c[1]*a,b[2]+c[2]*a])}if(a.a){var c=this.a.H(a.a).P(),d=this.a.elements,
b=this.anchor.elements,e=a.a.elements,g=a.anchor.elements,f=Matrix.b(2,2);for(a=0;f.O();)a++,f=Matrix.create([[d[a%3],d[(a+1)%3]],[e[a%3],e[(a+1)%3]]]);f=f.inverse().elements;b=d[0]*b[0]+d[1]*b[1]+d[2]*b[2];d=e[0]*g[0]+e[1]*g[1]+e[2]*g[2];b=[f[0][0]*b+f[0][1]*d,f[1][0]*b+f[1][1]*d];d=[];for(e=1;3>=e;e++)d.push(a==e?0:b[(e+(5-a)%3)%3]);return n.create(d,c)}},h:function(a){a=a.elements||a;var b=this.anchor.elements,c=this.a.elements,b=(b[0]-a[0])*c[0]+(b[1]-a[1])*c[1]+(b[2]-(a[2]||0))*c[2];return Vector.create([a[0]+
c[0]*b,a[1]+c[1]*b,(a[2]||0)+c[2]*b])},rotate:function(a,b){a=Matrix.s(a,b.direction).elements;var c=b.h(this.anchor).elements,d=this.anchor.elements;b=this.a.elements;var e=c[0],g=c[1],c=c[2],f=d[0],h=d[1],d=d[2],f=f-e,h=h-g,d=d-c;return p.create([e+a[0][0]*f+a[0][1]*h+a[0][2]*d,g+a[1][0]*f+a[1][1]*h+a[1][2]*d,c+a[2][0]*f+a[2][1]*h+a[2][2]*d],[a[0][0]*b[0]+a[0][1]*b[1]+a[0][2]*b[2],a[1][0]*b[0]+a[1][1]*b[1]+a[1][2]*b[2],a[2][0]*b[0]+a[2][1]*b[1]+a[2][2]*b[2]])},l:function(a){if(a.a){var b=this.anchor.elements,
c=this.a.elements,d=b[0],e=b[1],b=b[2],g=c[0],f=c[1],h=c[2],c=this.anchor.l(a).elements,d=d+g,e=e+f,b=b+h;a=a.h([d,e,b]).elements;a=[a[0]+(a[0]-d)-c[0],a[1]+(a[1]-e)-c[1],a[2]+(a[2]-b)-c[2]];return p.create(c,a)}if(a.direction)return this.rotate(Math.PI,a);a=a.elements||a;return p.create(this.anchor.l([a[0],a[1],a[2]||0]),this.a)},G:function(a,b,c){a=Vector.create(a);a=a.v();if(null===a)return null;b=Vector.create(b);b=b.v();if(null===b)return null;if("undefined"==typeof c)c=null;else if(c=Vector.create(c),
c=c.v(),null===c)return null;var d=a.elements[0],e=a.elements[1],g=a.elements[2],f=b.elements[0],h=b.elements[1],k=b.elements[2];if(null!==c){b=c.elements[0];var l=c.elements[1];c=c.elements[2];e=Vector.create([(h-e)*(c-g)-(k-g)*(l-e),(k-g)*(b-d)-(f-d)*(c-g),(f-d)*(l-e)-(h-e)*(b-d)]);d=e.j();if(0===d)return null;e=Vector.create([e.elements[0]/d,e.elements[1]/d,e.elements[2]/d])}else{d=Math.sqrt(f*f+h*h+k*k);if(0===d)return null;e=Vector.create([b.elements[0]/d,b.elements[1]/d,b.elements[2]/d])}this.anchor=
a;this.a=e;return this}};p.create=function(a,b,c){var d=new p;return d.G(a,b,c)};p.T=p.create(Vector.b(3),Vector.k);p.U=p.create(Vector.b(3),Vector.C);p.V=p.create(Vector.b(3),Vector.D);p.ja=p.T;p.la=p.U;p.ha=p.V;
(function(){var k,aa=aa||{},l=this,m=function(a){return void 0!==a},ba=function(a,b){a=a.split(".");var c=l;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)!a.length&&m(b)?c[e]=b:c=c[e]&&c[e]!==Object.prototype[e]?c[e]:c[e]={}},ca=function(a){a=a.split(".");for(var b=l,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b},da=function(){},n=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);
if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},ea=function(a){var b=n(a);return"array"==b||"object"==
b&&"number"==typeof a.length},q=function(a){return"string"==typeof a},fa=function(a){return"number"==typeof a},r=function(a){return"function"==n(a)},ga=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b},ha=function(a,b,c){return a.call.apply(a.bind,arguments)},ia=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,e);return a.apply(b,
c)}}return function(){return a.apply(b,arguments)}},t=function(a,b,c){t=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia;return t.apply(null,arguments)},u=Date.now||function(){return+new Date},v=function(a,b){function c(){}c.prototype=b.prototype;a.$=b.prototype;a.prototype=new c;a.wf=function(a,c,g){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};var ja=function(a,b){for(var c in a)b.call(void 0,a[c],c,a)},ka=function(a){var b=[],c=0,e;for(e in a)b[c++]=a[e];return b},la=function(a){var b=[],c=0,e;for(e in a)b[c++]=e;return b},ma="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),na=function(a,b){for(var c,e,d=1;d<arguments.length;d++){e=arguments[d];for(c in e)a[c]=e[c];for(var g=0;g<ma.length;g++)c=ma[g],Object.prototype.hasOwnProperty.call(e,c)&&(a[c]=e[c])}};var oa=function(a,b){for(var c=a.split("%s"),e="",d=Array.prototype.slice.call(arguments,1);d.length&&1<c.length;)e+=c.shift()+d.shift();return e+c.join("%s")},pa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},xa=function(a){if(!qa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ra,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(sa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ta,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(ua,"&quot;"));-1!=a.indexOf("'")&&
(a=a.replace(va,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(wa,"&#0;"));return a},ra=/&/g,sa=/</g,ta=/>/g,ua=/"/g,va=/'/g,wa=/\x00/g,qa=/[\x00&<>"']/,ya=function(a,b){return a<b?-1:a>b?1:0},za=function(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})},Aa=function(a){var b=q(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,d){return b+d.toUpperCase()})};var Ca=function(){var a=w.prototype,b=Ba;"array"==n(b)||(b=ka(b));for(var c=b.length,e=0;e<c;e++)(function(a,b){Object.defineProperty(a,b,{get:function(){return this.getAttribute(b)},set:function(a){return this.setAttribute(b,a)},enumerable:!0})})(a,b[e])};(function(){var a=ca("CustomEvent");a||(a=function(a,c){c=c||{};var b=document.createEvent("CustomEvent");b.initCustomEvent(a,!!c.bubbles,!!c.cancelable,c.detail||null);return b},a.prototype=window.Event.prototype,l.CustomEvent=a)})();var Ea=function(){Module._broadwayInit();this.Te=Da(Module._broadwayCreateStream(1048576),1048576);this.qc={};this.da=!1;this.Rb={};this.nc=function(){};window._broadwayOnHeadersDecoded=this.le.bind(this);window._broadwayOnPictureDecoded=this.me.bind(this)};Ea.prototype.le=function(){};
Ea.prototype.me=function(a,b,c){var e=this.qc[a];e||(this.qc[a]=Da(a,b*c*3/2),e=this.qc[a]);if(this.da){if(!this.Ia){a=""+b+"x"+c;if(this.Rb[a])a=this.Rb[a];else{for(var d=b*c,g=(d|0)>>2,d=d+g+g,g=b*c*4,f=d+g+4*Math.pow(2,24),h=Math.pow(2,24),p=h;p<f;)p+=h;f=new ArrayBuffer(p);h=getYuvAsm(window,{},f);h.init(b,c);this.Rb[a]=h;h.heap=f;h.out=new Uint8Array(f,0,g);h.inp=new Uint8Array(f,g,d);h.outSize=g;a=h}this.Ia=a}this.Ia.inp.set(e);this.Ia.yuvConvert();e=new Uint8Array(this.Ia.outSize);e.set(this.Ia.out)}this.nc(e,
b,c)};Ea.prototype.decode=function(a){this.Te.set(a);Module._broadwaySetStreamLength(a.length);Module._broadwayPlayStream()};var Da=function(a,b){return Module.HEAPU8.subarray(a,a+b)};var Fa=function(a,b,c){return{va:0,Jb:0,Ib:0,Za:0,Lb:0,ba:0,cc:0,Yc:1E3,Xc:0,bc:0,L:a,bf:b,Lf:c,Vc:!1,pb:0}};var Ga=function(a){switch(a){case 1:return 2;case 2:return 3;case 3:return 4}return 1};var Ha=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ha);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};v(Ha,Error);Ha.prototype.name="CustomError";var Ia=function(a,b){b.unshift(a);Ha.call(this,oa.apply(null,b));b.shift()};v(Ia,Ha);Ia.prototype.name="AssertionError";
var Ja=function(a,b,c,e){var d="Assertion failed";if(c)var d=d+(": "+c),g=e;else a&&(d+=": "+a,g=b);throw new Ia(""+d,g||[]);},x=function(a,b,c){a||Ja("",null,b,Array.prototype.slice.call(arguments,2))},Ka=function(a,b){throw new Ia("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));},La=function(a,b,c){fa(a)||Ja("Expected number but got %s: %s.",[n(a),a],b,Array.prototype.slice.call(arguments,2));return a},Ma=function(a,b,c){r(a)||Ja("Expected function but got %s: %s.",[n(a),a],b,Array.prototype.slice.call(arguments,
2))};var Na=Array.prototype.indexOf?function(a,b,c){x(null!=a.length);return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(q(a))return q(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Oa=Array.prototype.forEach?function(a,b,c){x(null!=a.length);Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var e=a.length,d=q(a)?a.split(""):a,g=0;g<e;g++)g in d&&b.call(c,d[g],g,a)},Qa=function(a){var b;a:{b=Pa;for(var c=
a.length,e=q(a)?a.split(""):a,d=0;d<c;d++)if(d in e&&b.call(void 0,e[d],d,a)){b=d;break a}b=-1}return 0>b?null:q(a)?a.charAt(b):a[b]},Ra=function(a){return Array.prototype.concat.apply(Array.prototype,arguments)},Sa=function(a){var b=a.length;if(0<b){for(var c=Array(b),e=0;e<b;e++)c[e]=a[e];return c}return[]};var y;a:{var Ta=l.navigator;if(Ta){var Ua=Ta.userAgent;if(Ua){y=Ua;break a}}y=""}var A=function(a){return-1!=y.indexOf(a)};var Va="StopIteration"in l?l.StopIteration:{message:"StopIteration",stack:""},Wa=function(){};Wa.prototype.next=function(){throw Va;};Wa.prototype.fe=function(){return this};var B=function(a,b){this.N={};this.m=[];this.Hb=this.i=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var e=0;e<c;e+=2)this.set(arguments[e],arguments[e+1])}else a&&this.addAll(a)};B.prototype.H=function(){Xa(this);for(var a=[],b=0;b<this.m.length;b++)a.push(this.N[this.m[b]]);return a};B.prototype.X=function(){Xa(this);return this.m.concat()};B.prototype.Ka=function(a){return Ya(this.N,a)};
B.prototype.remove=function(a){return Ya(this.N,a)?(delete this.N[a],this.i--,this.Hb++,this.m.length>2*this.i&&Xa(this),!0):!1};var Xa=function(a){if(a.i!=a.m.length){for(var b=0,c=0;b<a.m.length;){var e=a.m[b];Ya(a.N,e)&&(a.m[c++]=e);b++}a.m.length=c}if(a.i!=a.m.length){for(var d={},c=b=0;b<a.m.length;)e=a.m[b],Ya(d,e)||(a.m[c++]=e,d[e]=1),b++;a.m.length=c}};k=B.prototype;k.get=function(a,b){return Ya(this.N,a)?this.N[a]:b};
k.set=function(a,b){Ya(this.N,a)||(this.i++,this.m.push(a),this.Hb++);this.N[a]=b};k.addAll=function(a){var b;a instanceof B?(b=a.X(),a=a.H()):(b=la(a),a=ka(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};k.forEach=function(a,b){for(var c=this.X(),e=0;e<c.length;e++){var d=c[e],g=this.get(d);a.call(b,g,d,this)}};k.clone=function(){return new B(this)};
k.fe=function(a){Xa(this);var b=0,c=this.Hb,e=this,d=new Wa;d.next=function(){if(c!=e.Hb)throw Error("The map has changed since the iterator was created");if(b>=e.m.length)throw Va;var d=e.m[b++];return a?d:e.N[d]};return d};var Ya=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var Za=function(a){if(a.H&&"function"==typeof a.H)return a.H();if(q(a))return a.split("");if(ea(a)){for(var b=[],c=a.length,e=0;e<c;e++)b.push(a[e]);return b}return ka(a)},$a=function(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(ea(a)||q(a))Oa(a,b,void 0);else{var c;if(a.X&&"function"==typeof a.X)c=a.X();else if(a.H&&"function"==typeof a.H)c=void 0;else if(ea(a)||q(a)){c=[];for(var e=a.length,d=0;d<e;d++)c.push(d)}else c=la(a);for(var e=Za(a),d=e.length,g=0;g<d;g++)b.call(void 0,
e[g],c&&c[g],a)}};var ab=function(a){ab[" "](a);return a};ab[" "]=da;var cb=function(a,b){var c=bb;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var db=A("Opera"),C=A("Trident")||A("MSIE"),eb=A("Edge"),fb=A("Gecko")&&!(-1!=y.toLowerCase().indexOf("webkit")&&!A("Edge"))&&!(A("Trident")||A("MSIE"))&&!A("Edge"),gb=-1!=y.toLowerCase().indexOf("webkit")&&!A("Edge"),hb=gb&&A("Mobile"),ib=A("Android"),jb=A("iPhone")&&!A("iPod")&&!A("iPad"),kb=A("iPad"),lb=function(){var a=l.document;return a?a.documentMode:void 0},mb;
a:{var nb="",ob=function(){var a=y;if(fb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(eb)return/Edge\/([\d\.]+)/.exec(a);if(C)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(gb)return/WebKit\/(\S+)/.exec(a);if(db)return/(?:Version)[ \/]?(\S+)/.exec(a)}();ob&&(nb=ob?ob[1]:"");if(C){var pb=lb();if(null!=pb&&pb>parseFloat(nb)){mb=String(pb);break a}}mb=nb}
var qb=mb,bb={},D=function(a){return cb(a,function(){for(var b=0,c=pa(String(qb)).split("."),e=pa(String(a)).split("."),d=Math.max(c.length,e.length),g=0;0==b&&g<d;g++){var f=c[g]||"",h=e[g]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];if(0==f[0].length&&0==h[0].length)break;b=ya(0==f[1].length?0:parseInt(f[1],10),0==h[1].length?0:parseInt(h[1],10))||ya(0==f[2].length,0==h[2].length)||ya(f[2],h[2]);f=f[3];h=h[3]}while(0==b)}return 0<=b})},rb;var sb=l.document;
rb=sb&&C?lb()||("CSS1Compat"==sb.compatMode?parseInt(qb,10):5):void 0;var tb=function(a,b,c,e,d){this.reset(a,b,c,e,d)};tb.prototype.Xb=null;var ub=0;tb.prototype.reset=function(a,b,c,e,d){"number"==typeof d||ub++;this.Md=e||u();this.la=a;this.ld=b;this.hd=c;delete this.Xb};tb.prototype.setLevel=function(a){this.la=a};var vb=function(a){this.Ae=a;this.Na=this.Vb=this.la=this.Z=null},wb=function(a,b){this.name=a;this.value=b};wb.prototype.toString=function(){return this.name};var xb=new wb("SHOUT",1200),yb=new wb("SEVERE",1E3),zb=new wb("WARNING",900),Ab=new wb("CONFIG",700),Bb=new wb("FINE",500);vb.prototype.getParent=function(){return this.Z};vb.prototype.setLevel=function(a){this.la=a};var Cb=function(a){if(a.la)return a.la;if(a.Z)return Cb(a.Z);Ka("Root logger has no level set.");return null};
vb.prototype.log=function(a,b,c){if(a.value>=Cb(this).value)for(r(b)&&(b=b()),a=new tb(a,String(b),this.Ae),c&&(a.Xb=c),c="log:"+a.ld,l.console&&(l.console.timeStamp?l.console.timeStamp(c):l.console.markTimeline&&l.console.markTimeline(c)),l.msWriteProfilerMark&&l.msWriteProfilerMark(c),c=this;c;){var e=c,d=a;if(e.Na)for(var g=0;b=e.Na[g];g++)b(d);c=c.getParent()}};vb.prototype.severe=function(a,b){this.log(yb,a,b)};vb.prototype.fine=function(a,b){this.log(Bb,a,b)};
var Db={},Eb=null,Fb=function(){Eb||(Eb=new vb(""),Db[""]=Eb,Eb.setLevel(Ab))},Gb=function(a){Fb();var b;if(!(b=Db[a])){b=new vb(a);var c=a.lastIndexOf("."),e=a.substr(c+1),c=Gb(a.substr(0,c));c.Vb||(c.Vb={});c.Vb[e]=b;b.Z=c;Db[a]=b}return b};var Hb=function(){this.wd=u()},Ib=new Hb;Hb.prototype.set=function(a){this.wd=a};Hb.prototype.reset=function(){this.set(u())};Hb.prototype.get=function(){return this.wd};var Jb=function(a){this.He=a||"";this.Se=Ib};k=Jb.prototype;k.Kc=!0;k.Bd=!0;k.Qe=!0;k.Pe=!0;k.Cd=!1;k.Re=!1;var Kb=function(a){return 10>a?"0"+a:String(a)},Lb=function(a,b){a=(a.Md-b)/1E3;b=a.toFixed(3);var c=0;if(1>a)c=2;else for(;100>a;)c++,a*=10;for(;0<c--;)b=" "+b;return b},Mb=function(a){Jb.call(this,a)};v(Mb,Jb);var Nb=function(){this.Ke=t(this.ie,this);this.gb=new Mb;this.gb.Bd=!1;this.gb.Cd=!1;this.ed=this.gb.Kc=!1;this.se={}},Pb=function(){var a=Ob;if(1!=a.ed){var b;Fb();b=Eb;var c=a.Ke;b.Na||(b.Na=[]);b.Na.push(c);a.ed=!0}};
Nb.prototype.ie=function(a){if(!this.se[a.hd]){var b;b=this.gb;var c=[];c.push(b.He," ");if(b.Bd){var e=new Date(a.Md);c.push("[",Kb(e.getFullYear()-2E3)+Kb(e.getMonth()+1)+Kb(e.getDate())+" "+Kb(e.getHours())+":"+Kb(e.getMinutes())+":"+Kb(e.getSeconds())+"."+Kb(Math.floor(e.getMilliseconds()/10)),"] ")}b.Qe&&c.push("[",Lb(a,b.Se.get()),"s] ");b.Pe&&c.push("[",a.hd,"] ");b.Re&&c.push("[",a.la.name,"] ");c.push(a.ld);b.Cd&&(e=a.Xb)&&c.push("\n",e instanceof Error?e.message:e.toString());b.Kc&&c.push("\n");
b=c.join("");if(c=Qb)switch(a.la){case xb:Rb(c,"info",b);break;case yb:Rb(c,"error",b);break;case zb:Rb(c,"warn",b);break;default:Rb(c,"debug",b)}}};var Ob=null,Qb=l.console,Rb=function(a,b,c){if(a[b])a[b](c);else a.log(c)};var E=function(a,b){a&&a.severe(b,void 0)},F=function(a,b){a&&a.fine(b,void 0)};var G=Gb("studiocodec");l.console&&(Ob||(Ob=new Nb),l.location&&-1!=l.location.href.indexOf("Debug=true")&&Pb(),Pb());var Sb=function(a,b){this.width=a;this.height=b};k=Sb.prototype;k.clone=function(){return new Sb(this.width,this.height)};k.toString=function(){return"("+this.width+" x "+this.height+")"};k.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};k.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};k.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};var Tb=function(a){this.a=a;this.h=this.a.createProgram()};Tb.prototype.attach=function(a){this.a.attachShader(this.h,a.shader)};Tb.prototype.link=function(){this.a.linkProgram(this.h);this.a.getProgramParameter(this.h,this.a.LINK_STATUS)||E(G,"Unable to initialize the shader program.")};Tb.prototype.use=function(){this.a.useProgram(this.h)};var Ub=function(a,b){this.shader=null;if("x-shader/x-fragment"==b.type)this.shader=a.createShader(a.FRAGMENT_SHADER);else if("x-shader/x-vertex"==b.type)this.shader=a.createShader(a.VERTEX_SHADER);else{E(G,"Unknown shader type: "+b.type);return}a.shaderSource(this.shader,b.source);a.compileShader(this.shader);a.getShaderParameter(this.shader,a.COMPILE_STATUS)||E(G,"An error occurred compiling the shaders: "+a.getShaderInfoLog(this.shader))};Matrix.Xe=function(a){if(2==a.elements.length){var b=Matrix.I(3);b.elements[2][0]=a.elements[0];b.elements[2][1]=a.elements[1];return b}if(3==a.elements.length)return b=Matrix.I(4),b.elements[0][3]=a.elements[0],b.elements[1][3]=a.elements[1],b.elements[2][3]=a.elements[2],b;throw"Invalid length for Translation";};
Matrix.prototype.$b=function(){var a=[];if(0==this.elements.length)return[];for(var b=0;b<this.elements[0].length;b++)for(var c=0;c<this.elements.length;c++)a.push(this.elements[c][b]);return a};Vector.prototype.$b=function(){return this.elements};var Vb=function(a,b,c){this.a=a;this.j=b;this.Ma=c?c:a.LUMINANCE;this.Ve=[this.a.TEXTURE0,this.a.TEXTURE1,this.a.TEXTURE2];this.Cc=this.a.createTexture();this.a.bindTexture(this.a.TEXTURE_2D,this.Cc);this.a.texImage2D(this.a.TEXTURE_2D,0,this.Ma,this.j.width,this.j.height,0,this.Ma,this.a.UNSIGNED_BYTE,null);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST);this.a.texParameteri(this.a.TEXTURE_2D,
this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE)};Vb.prototype.fill=function(a,b){this.a.bindTexture(this.a.TEXTURE_2D,this.Cc);b?this.a.texSubImage2D(this.a.TEXTURE_2D,0,0,0,this.j.width,this.j.height,this.Ma,this.a.UNSIGNED_BYTE,a):this.a.texImage2D(this.a.TEXTURE_2D,0,this.Ma,this.j.width,this.j.height,0,this.Ma,this.a.UNSIGNED_BYTE,a)};
Vb.prototype.bind=function(a,b,c){this.a.activeTexture(this.Ve[a]);this.a.bindTexture(this.a.TEXTURE_2D,this.Cc);this.a.uniform1i(this.a.getUniformLocation(b.h,c),a)};var Wb=!C||9<=Number(rb);!fb&&!C||C&&9<=Number(rb)||fb&&D("1.9.1");C&&D("9");var Xb=function(){var a=document;return q("gwd-ad")?a.getElementById("gwd-ad"):"gwd-ad"},Zb=function(a,b){ja(b,function(b,e){"style"==e?a.style.cssText=b:"class"==e?a.className=b:"for"==e?a.htmlFor=b:Yb.hasOwnProperty(e)?a.setAttribute(Yb[e],b):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?a.setAttribute(e,b):a[e]=b})},Yb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",
type:"type",usemap:"useMap",valign:"vAlign",width:"width"},H=function(a,b,c){var e=arguments,d=document,g=String(e[0]),f=e[1];if(!Wb&&f&&(f.name||f.type)){g=["<",g];f.name&&g.push(' name="',xa(f.name),'"');if(f.type){g.push(' type="',xa(f.type),'"');var h={};na(h,f);delete h.type;f=h}g.push(">");g=g.join("")}g=d.createElement(g);f&&(q(f)?g.className=f:"array"==n(f)?g.className=f.join(" "):Zb(g,f));2<e.length&&$b(d,g,e);return g},$b=function(a,b,c){function e(c){c&&b.appendChild(q(c)?a.createTextNode(c):
c)}for(var d=2;d<c.length;d++){var g=c[d];!ea(g)||ga(g)&&0<g.nodeType?e(g):Oa(ac(g)?Sa(g):g,e)}},bc=function(a,b){var c=b.parentNode;c&&c.replaceChild(a,b)},ac=function(a){if(a&&"number"==typeof a.length){if(ga(a))return"function"==typeof a.item||"string"==typeof a.item;if(r(a))return"function"==typeof a.item}return!1};var cc=function(a,b){this.af={type:"x-shader/x-vertex",source:"attribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nvarying highp vec2 vTextureCoord;\nvoid main(void) {\n  gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n  vTextureCoord = aTextureCoord;\n}"};this.te={type:"x-shader/x-fragment",source:"precision highp float;\nvarying highp vec2 vTextureCoord;\nuniform sampler2D YTexture;\nuniform sampler2D UTexture;\nuniform sampler2D VTexture;\nconst mat4 YUV2RGB = mat4\n(\n  1.1643828125, 0, 1.59602734375, -.87078515625,\n  1.1643828125, -.39176171875, -.81296875, .52959375,\n  1.1643828125, 2.017234375, 0, -1.081390625,\n  0, 0, 0, 1\n);\nvoid main(void) {\n  gl_FragColor = vec4(texture2D(YTexture, vTextureCoord).x,\n    texture2D(UTexture, vTextureCoord).x, texture2D(VTexture,\n      vTextureCoord).x, 1) * YUV2RGB;\n}"};
this.l=a;this.j=b;this.Zc=new Sb(this.j.width>>>1,this.j.height>>>1);try{this.a=this.l.getContext("webgl")||this.l.getContext("experimental-webgl")}catch(d){}this.a||E(G,"Unable to initialize WebGL. Your browser may not support it.");this.h=new Tb(this.a);this.h.attach(new Ub(this.a,this.af));this.h.attach(new Ub(this.a,this.te));this.h.link();this.h.use();a=this.h;this.Td=a.a.getAttribLocation(a.h,"aVertexPosition");this.a.enableVertexAttribArray(this.Td);a=this.h;this.Kd=a.a.getAttribLocation(a.h,
"aTextureCoord");this.a.enableVertexAttribArray(this.Kd);this.wb=this.a.createBuffer();this.a.bindBuffer(this.a.ARRAY_BUFFER,this.wb);a=[1,1,0,-1,1,0,1,-1,0,-1,-1,0];this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(a),this.a.STATIC_DRAW);this.wb.Ff=3;this.wb.Nf=4;this.td=this.a.createBuffer();this.a.bindBuffer(this.a.ARRAY_BUFFER,this.td);a=[1,0,0,0,1,1,0,1];this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(a),this.a.STATIC_DRAW);this.Vd=new Vb(this.a,this.j);this.Pd=new Vb(this.a,this.Zc);
this.Sd=new Vb(this.a,this.Zc);a=.1*Math.tan(45*Math.PI/360);b=-a;var c=1*b,e=1*a;this.Ee=Matrix.create([[.2/(e-c),0,(e+c)/(e-c),0],[0,.2/(a-b),(a+b)/(a-b),0],[0,0,-100.1/99.9,-20/99.9],[0,0,-1,0]]);this.mc=Matrix.I(4);a=[0,0,-2.4];a=Matrix.Xe(Vector.create([a[0],a[1],a[2]]));if(4!=a.elements.length||4!=a.elements[0].length)if(4<a.elements.length||4<a.elements[0].length)a=null;else{for(b=0;b<a.elements.length;b++)for(c=a.elements[b].length;4>c;c++)b==c?a.elements[b].push(1):a.elements[b].push(0);
for(b=a.elements.length;4>b;b++)0==b?a.elements.push([1,0,0,0]):1==b?a.elements.push([0,1,0,0]):2==b?a.elements.push([0,0,1,0]):3==b&&a.elements.push([0,0,0,1])}this.mc=this.mc.x(a);this.a.bindBuffer(this.a.ARRAY_BUFFER,this.wb);this.a.vertexAttribPointer(this.Td,3,this.a.FLOAT,!1,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,this.td);this.a.vertexAttribPointer(this.Kd,2,this.a.FLOAT,!1,0,0);this.Vd.bind(0,this.h,"YTexture");this.Pd.bind(1,this.h,"UTexture");this.Sd.bind(2,this.h,"VTexture");a=this.h;
b=new Float32Array(this.Ee.$b());a.a.uniformMatrix4fv(a.a.getUniformLocation(a.h,"uPMatrix"),!1,b);a=this.h;b=new Float32Array(this.mc.$b());a.a.uniformMatrix4fv(a.a.getUniformLocation(a.h,"uMVMatrix"),!1,b)};var dc=function(a,b,c){this.we=c;this.oe=a;this.Oe=b;this.qb=0;this.kb=null};dc.prototype.get=function(){var a;0<this.qb?(this.qb--,a=this.kb,this.kb=a.next,a.next=null):a=this.oe();return a};dc.prototype.put=function(a){this.Oe(a);this.qb<this.we&&(this.qb++,a.next=this.kb,this.kb=a)};var ec=function(a){l.setTimeout(function(){throw a;},0)},fc,gc=function(){var a=l.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!A("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),e="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,
a=t(function(a){if(("*"==e||a.origin==e)&&a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,e)}}});if("undefined"!==typeof a&&!A("Trident")&&!A("MSIE")){var b=new a,c={},e=c;b.port1.onmessage=function(){if(m(c.next)){c=c.next;var a=c.Oc;c.Oc=null;a()}};return function(a){e.next={Oc:a};e=e.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?
function(a){var b=document.createElement("SCRIPT");b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){l.setTimeout(a,0)}};var hc=function(){this.Mb=this.sa=null},jc=new dc(function(){return new ic},function(a){a.reset()},100);hc.prototype.add=function(a,b){var c=jc.get();c.set(a,b);this.Mb?this.Mb.next=c:(x(!this.sa),this.sa=c);this.Mb=c};hc.prototype.remove=function(){var a=null;this.sa&&(a=this.sa,this.sa=this.sa.next,this.sa||(this.Mb=null),a.next=null);return a};var ic=function(){this.next=this.scope=this.ac=null};ic.prototype.set=function(a,b){this.ac=a;this.scope=b;this.next=null};
ic.prototype.reset=function(){this.next=this.scope=this.ac=null};var oc=function(a,b){kc||lc();mc||(kc(),mc=!0);nc.add(a,b)},kc,lc=function(){if(-1!=String(l.Promise).indexOf("[native code]")){var a=l.Promise.resolve(void 0);kc=function(){a.then(pc)}}else kc=function(){var a=pc;!r(l.setImmediate)||l.Window&&l.Window.prototype&&!A("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(fc||(fc=gc()),fc(a)):l.setImmediate(a)}},mc=!1,nc=new hc,pc=function(){for(var a;a=nc.remove();){try{a.ac.call(a.scope)}catch(b){ec(b)}jc.put(a)}mc=!1};var I=function(a,b){this.S=0;this.yd=void 0;this.bb=this.ta=this.Z=null;this.ib=this.Yb=!1;if(a!=da)try{var c=this;a.call(b,function(a){qc(c,2,a)},function(a){try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(d){}qc(c,3,a)})}catch(e){qc(this,3,e)}},rc=function(){this.next=this.context=this.wa=this.na=this.ua=null;this.Qb=!1};rc.prototype.reset=function(){this.context=this.wa=this.na=this.ua=null;this.Qb=!1};
var sc=new dc(function(){return new rc},function(a){a.reset()},100),tc=function(a,b,c){var e=sc.get();e.na=a;e.wa=b;e.context=c;return e},vc=function(){var a,b;new I(function(c,e){a=c;b=e});return new uc(a,b)};I.prototype.then=function(a,b,c){null!=a&&Ma(a,"opt_onFulfilled should be a function.");null!=b&&Ma(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return wc(this,r(a)?a:null,r(b)?b:null,c)};I.prototype.then=I.prototype.then;
I.prototype.$goog_Thenable=!0;var yc=function(a,b){a.ta||2!=a.S&&3!=a.S||xc(a);x(null!=b.na);a.bb?a.bb.next=b:a.ta=b;a.bb=b},wc=function(a,b,c,e){var d=tc(null,null,null);d.ua=new I(function(a,f){d.na=b?function(c){try{var d=b.call(e,c);a(d)}catch(z){f(z)}}:a;d.wa=c?function(b){try{var d=c.call(e,b);a(d)}catch(z){f(z)}}:f});d.ua.Z=a;yc(a,d);return d.ua};I.prototype.Ye=function(a){x(1==this.S);this.S=0;qc(this,2,a)};I.prototype.Ze=function(a){x(1==this.S);this.S=0;qc(this,3,a)};
var qc=function(a,b,c){if(0==a.S){a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself"));a.S=1;var e;a:{var d=c,g=a.Ye,f=a.Ze;if(d instanceof I)null!=g&&Ma(g,"opt_onFulfilled should be a function."),null!=f&&Ma(f,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),yc(d,tc(g||da,f||null,a)),e=!0;else{var h;if(d)try{h=!!d.$goog_Thenable}catch(z){h=!1}else h=!1;if(h)d.then(g,f,a),e=!0;else{if(ga(d))try{var p=d.then;if(r(p)){zc(d,p,g,
f,a);e=!0;break a}}catch(z){f.call(a,z);e=!0;break a}e=!1}}}e||(a.yd=c,a.S=b,a.Z=null,xc(a),3!=b||Ac(a,c))}},zc=function(a,b,c,e,d){var g=!1,f=function(a){g||(g=!0,c.call(d,a))},h=function(a){g||(g=!0,e.call(d,a))};try{b.call(a,f,h)}catch(p){h(p)}},xc=function(a){a.Yb||(a.Yb=!0,oc(a.qe,a))},Bc=function(a){var b=null;a.ta&&(b=a.ta,a.ta=b.next,b.next=null);a.ta||(a.bb=null);null!=b&&x(null!=b.na);return b};
I.prototype.qe=function(){for(var a;a=Bc(this);){var b=this.S,c=this.yd;if(3==b&&a.wa&&!a.Qb){var e;for(e=this;e&&e.ib;e=e.Z)e.ib=!1}if(a.ua)a.ua.Z=null,Cc(a,b,c);else try{a.Qb?a.na.call(a.context):Cc(a,b,c)}catch(d){Dc.call(null,d)}sc.put(a)}this.Yb=!1};var Cc=function(a,b,c){2==b?a.na.call(a.context,c):a.wa&&a.wa.call(a.context,c)},Ac=function(a,b){a.ib=!0;oc(function(){a.ib&&Dc.call(null,b)})},Dc=ec,uc=function(a,b){this.resolve=a;this.reject=b};var Fc=function(a,b,c){if(q(b))(b=Ec(a,b))&&(a.style[b]=c);else for(var e in b){c=a;var d=b[e],g=Ec(c,e);g&&(c.style[g]=d)}},Gc={},Ec=function(a,b){var c=Gc[b];if(!c){var e=za(b),c=e;void 0===a.style[e]&&(e=(gb?"Webkit":fb?"Moz":C?"ms":db?"O":null)+Aa(e),void 0!==a.style[e]&&(c=e));Gc[b]=c}return c};var Hc=function(){this.La=this.La;this.rb=this.rb};Hc.prototype.La=!1;Hc.prototype.fb=function(){this.La||(this.La=!0,this.ia())};Hc.prototype.ia=function(){if(this.rb)for(;this.rb.length;)this.rb.shift()()};var Ic=function(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.Aa=!1;this.zd=!0};Ic.prototype.preventDefault=function(){this.defaultPrevented=!0;this.zd=!1};var Jc=!C||9<=Number(rb),Kc=C&&!D("9");!gb||D("528");fb&&D("1.9b")||C&&D("8")||db&&D("9.5")||gb&&D("528");fb&&!D("8")||C&&D("9");var Lc=function(a,b){Ic.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.key="";this.charCode=this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.Tc=this.state=null;a&&this.init(a,b)};v(Lc,Ic);
Lc.prototype.init=function(a,b){var c=this.type=a.type,e=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(fb){var d;a:{try{ab(b.nodeName);d=!0;break a}catch(g){}d=!1}d||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;null===e?(this.offsetX=gb||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=gb||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:
a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.Tc=
a;a.defaultPrevented&&this.preventDefault()};Lc.prototype.preventDefault=function(){Lc.$.preventDefault.call(this);var a=this.Tc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Kc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Mc="closure_listenable_"+(1E6*Math.random()|0),Nc=0;var Oc=function(a,b,c,e,d){this.listener=a;this.vb=null;this.src=b;this.type=c;this.capture=!!e;this.jb=d;this.key=++Nc;this.Ca=this.ab=!1},Pc=function(a){a.Ca=!0;a.listener=null;a.vb=null;a.src=null;a.jb=null};var Qc=function(a){this.src=a;this.s={};this.Ya=0};Qc.prototype.add=function(a,b,c,e,d){var g=a.toString();a=this.s[g];a||(a=this.s[g]=[],this.Ya++);var f=Rc(a,b,e,d);-1<f?(b=a[f],c||(b.ab=!1)):(b=new Oc(b,this.src,g,!!e,d),b.ab=c,a.push(b));return b};Qc.prototype.remove=function(a,b,c,e){a=a.toString();if(!(a in this.s))return!1;var d=this.s[a];b=Rc(d,b,c,e);return-1<b?(Pc(d[b]),x(null!=d.length),Array.prototype.splice.call(d,b,1),0==d.length&&(delete this.s[a],this.Ya--),!0):!1};
var Sc=function(a,b){var c=b.type;if(c in a.s){var e=a.s[c],d=Na(e,b),g;if(g=0<=d)x(null!=e.length),Array.prototype.splice.call(e,d,1);g&&(Pc(b),0==a.s[c].length&&(delete a.s[c],a.Ya--))}};Qc.prototype.ec=function(a,b,c,e){a=this.s[a.toString()];var d=-1;a&&(d=Rc(a,b,c,e));return-1<d?a[d]:null};var Rc=function(a,b,c,e){for(var d=0;d<a.length;++d){var g=a[d];if(!g.Ca&&g.listener==b&&g.capture==!!c&&g.jb==e)return d}return-1};var Tc="closure_lm_"+(1E6*Math.random()|0),Uc={},Vc=0,J=function(a,b,c,e,d){if("array"==n(b)){for(var g=0;g<b.length;g++)J(a,b[g],c,e,d);return null}c=Wc(c);if(a&&a[Mc])g=c,Yc(a),a=a.V.add(String(b),g,!1,e,d);else{if(!b)throw Error("Invalid event type");var g=!!e,f=Zc(a);f||(a[Tc]=f=new Qc(a));e=f.add(b,c,!1,e,d);if(!e.vb){d=$c();e.vb=d;d.src=a;d.listener=e;if(a.addEventListener)a.addEventListener(b.toString(),d,g);else if(a.attachEvent)a.attachEvent(ad(b.toString()),d);else throw Error("addEventListener and attachEvent are unavailable.");
Vc++}a=e}return a},$c=function(){var a=bd,b=Jc?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b},cd=function(a,b,c,e,d){if("array"==n(b))for(var g=0;g<b.length;g++)cd(a,b[g],c,e,d);else c=Wc(c),a&&a[Mc]?a.V.remove(String(b),c,e,d):a&&(a=Zc(a))&&(b=a.ec(b,c,!!e,d))&&dd(b)},dd=function(a){if(!fa(a)&&a&&!a.Ca){var b=a.src;if(b&&b[Mc])Sc(b.V,a);else{var c=a.type,e=a.vb;b.removeEventListener?b.removeEventListener(c,e,a.capture):b.detachEvent&&
b.detachEvent(ad(c),e);Vc--;(c=Zc(b))?(Sc(c,a),0==c.Ya&&(c.src=null,b[Tc]=null)):Pc(a)}}},ad=function(a){return a in Uc?Uc[a]:Uc[a]="on"+a},fd=function(a,b,c,e){var d=!0;if(a=Zc(a))if(b=a.s[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var g=b[a];g&&g.capture==c&&!g.Ca&&(g=ed(g,e),d=d&&!1!==g)}return d},ed=function(a,b){var c=a.listener,e=a.jb||a.src;a.ab&&dd(a);return c.call(e,b)},bd=function(a,b){if(a.Ca)return!0;if(!Jc){var c=b||ca("window.event");b=new Lc(c,this);var e=!0;if(!(0>c.keyCode||
void 0!=c.returnValue)){a:{var d=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(f){d=!0}if(d||void 0==c.returnValue)c.returnValue=!0}c=[];for(d=b.currentTarget;d;d=d.parentNode)c.push(d);a=a.type;for(d=c.length-1;!b.Aa&&0<=d;d--){b.currentTarget=c[d];var g=fd(c[d],a,!0,b),e=e&&g}for(d=0;!b.Aa&&d<c.length;d++)b.currentTarget=c[d],g=fd(c[d],a,!1,b),e=e&&g}return e}return ed(a,new Lc(b,this))},Zc=function(a){a=a[Tc];return a instanceof Qc?a:null},gd="__closure_events_fn_"+(1E9*Math.random()>>>0),
Wc=function(a){x(a,"Listener can not be null.");if(r(a))return a;x(a.handleEvent,"An object listener must have handleEvent method.");a[gd]||(a[gd]=function(b){return a.handleEvent(b)});return a[gd]};var K=function(){Hc.call(this);this.V=new Qc(this);this.he=this;this.pc=null};v(K,Hc);K.prototype[Mc]=!0;K.prototype.addEventListener=function(a,b,c,e){J(this,a,b,c,e)};K.prototype.removeEventListener=function(a,b,c,e){cd(this,a,b,c,e)};
K.prototype.dispatchEvent=function(a){Yc(this);var b,c=this.pc;if(c){b=[];for(var e=1;c;c=c.pc)b.push(c),x(1E3>++e,"infinite loop")}c=this.he;e=a.type||a;if(q(a))a=new Ic(a,c);else if(a instanceof Ic)a.target=a.target||c;else{var d=a;a=new Ic(e,c);na(a,d)}var d=!0,g;if(b)for(var f=b.length-1;!a.Aa&&0<=f;f--)g=a.currentTarget=b[f],d=hd(g,e,!0,a)&&d;a.Aa||(g=a.currentTarget=c,d=hd(g,e,!0,a)&&d,a.Aa||(d=hd(g,e,!1,a)&&d));if(b)for(f=0;!a.Aa&&f<b.length;f++)g=a.currentTarget=b[f],d=hd(g,e,!1,a)&&d;return d};
K.prototype.ia=function(){K.$.ia.call(this);if(this.V){var a=this.V,b=0,c;for(c in a.s){for(var e=a.s[c],d=0;d<e.length;d++)++b,Pc(e[d]);delete a.s[c];a.Ya--}}this.pc=null};var hd=function(a,b,c,e){b=a.V.s[String(b)];if(!b)return!0;b=b.concat();for(var d=!0,g=0;g<b.length;++g){var f=b[g];if(f&&!f.Ca&&f.capture==c){var h=f.listener,p=f.jb||f.src;f.ab&&Sc(a.V,f);d=!1!==h.call(p,e)&&d}}return d&&0!=e.zd};K.prototype.ec=function(a,b,c,e){return this.V.ec(String(a),b,c,e)};var Yc=function(a){x(a.V,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")};var id=function(a,b){K.call(this);this.mb=a||1;this.Ga=b||l;this.Tb=t(this.We,this);this.kc=u()};v(id,K);k=id.prototype;k.enabled=!1;k.T=null;k.We=function(){if(this.enabled){var a=u()-this.kc;0<a&&a<.8*this.mb?this.T=this.Ga.setTimeout(this.Tb,this.mb-a):(this.T&&(this.Ga.clearTimeout(this.T),this.T=null),this.dispatchEvent("tick"),this.enabled&&(this.T=this.Ga.setTimeout(this.Tb,this.mb),this.kc=u()))}};
k.start=function(){this.enabled=!0;this.T||(this.T=this.Ga.setTimeout(this.Tb,this.mb),this.kc=u())};k.stop=function(){this.enabled=!1;this.T&&(this.Ga.clearTimeout(this.T),this.T=null)};k.ia=function(){id.$.ia.call(this);this.stop();delete this.Ga};var L=function(a,b,c){if(r(a))c&&(a=t(a,c));else if(a&&"function"==typeof a.handleEvent)a=t(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:l.setTimeout(a,b||0)};var jd=function(){};var kd=function(a,b){this.U=b;this.re=a},ld=function(a,b,c){a=a.U.mdia.minf.stbl.stsz.table;for(var e=0,d=b;d<b+c;d++)e+=a[d];return e},md=function(a,b){a=a.U.mdia.minf.stbl.stsc.table;if(1===a.length){var c=a[0];return{index:b/c.samplesPerChunk,offset:b%c.samplesPerChunk}}for(var e=0,d=0;d<a.length;d++)if(c=a[d],0<d){var g=a[d-1],f=c.firstChunk-g.firstChunk,h=g.samplesPerChunk*f;if(b>=h){if(b-=h,d==a.length-1)return{index:e+f+Math.floor(b/c.samplesPerChunk),offset:b%c.samplesPerChunk}}else return{index:e+
Math.floor(b/g.samplesPerChunk),offset:b%g.samplesPerChunk};e+=f}return null};kd.prototype.fc=function(a,b,c){var e=this.re.source,d;d=md(this,a);d=this.U.mdia.minf.stbl.stco.table[d.index]+ld(this,a-d.offset,d.offset);for(var g=d+ld(this,a,1);0<g-d;){try{var f,h=e,p=h.c;h.seek(d);var z=M(h,!1)>>>0;h.seek(p);f=z;var we=e.subarray(d+4,d+f+4)}catch(Xc){if(Xc instanceof RangeError){c(a,b);return}throw Xc;}b(we);d=d+f+4}b(null)};var nd=function(a){this.Fb=[];this.source=a;this.Dc=0},vd=function(a,b,c,e){for(;M(b,!1);){var d,g=a;d=b;var f=new jd;f.offset=d.c;var h=d,p=f;p.size=N(h);p.type=od(h);switch(f.type){case "ftyp":f.name="File Type Box";f.If=od(d);f.Kf=N(d);f.Pc=Array((f.size-16)/4);for(g=0;g<f.Pc.length;g++)f.Pc[g]=od(d);break;case "moov":f.name="Movie Box";O(g,d,f);break;case "mvhd":f.name="Movie Header Box";P(d,f);f.creationTime=N(d);f.modificationTime=N(d);f.Ld=N(d);f.duration=N(d);f.Qf=M(d,!0)/65536;f.volume=(Q(d)<<
16>>16)/256;d.u(10);f.ye=pd(d,9);d.u(24);f.Mf=N(d);break;case "trak":f.name="Track Box";O(g,d,f);g.Fb[f.tkhd.Od]=new kd(g,f);g.Dc=g.Fb[f.tkhd.Od].U.mdia.minf.stbl.stsz.table.length;break;case "tkhd":f.name="Track Header Box";P(d,f);f.creationTime=N(d);f.modificationTime=N(d);f.Od=N(d);d.u(4);f.duration=N(d);d.u(8);f.Gf=Q(d);f.rf=Q(d);f.volume=(Q(d)<<16>>16)/256;d.u(2);f.ye=pd(d,9);f.width=M(d,!0)/65536;f.height=M(d,!0)/65536;break;case "mdia":f.name="Media Box";O(g,d,f);break;case "mdhd":f.name="Media Header Box";
P(d,f);f.creationTime=N(d);f.modificationTime=N(d);f.Ld=N(d);f.duration=N(d);g=Q(d);h="";for(p=0;3>p;p++)h+=String.fromCharCode((g>>>5*(2-p)&31)+96);f.language=h;d.u(2);break;case "hdlr":f.name="Handler Reference Box";P(d,f);d.u(4);f.Df=od(d);d.u(12);g=f.size-32;0<g&&(f.name=qd(d,g));break;case "minf":f.name="Media Information Box";O(g,d,f);break;case "stbl":f.name="Sample Table Box";O(g,d,f);break;case "stsd":f.name="Sample Description Box";P(d,f);f.sd=[];N(d);O(g,d,f);break;case "avc1":rd(d,6);
f.pe=Q(d);Q(d);Q(d);N(d);N(d);N(d);f.width=Q(d);f.height=Q(d);f.Ef=M(d,!0)/65536;f.Sf=M(d,!0)/65536;N(d);f.Cf=Q(d);h=d;p=R(h);if(null==p)h=null;else{32<p&&E(G,"Length greater than max");var z=qd(h,p);rd(h,32-p-1);h=z}f.zf=h;f.depth=Q(d);Q(d);O(g,d,f);break;case "mp4a":rd(d,6);f.pe=Q(d);f.version=Q(d);d.u(2);d.u(4);f.channelCount=Q(d);f.Ad=Q(d);f.yf=Q(d);f.Of=Q(d);f.sampleRate=N(d)>>>16;O(g,d,f);break;case "esds":f.name="Elementary Stream Descriptor";P(d,f);d.u(sd(d,f));break;case "avcC":f.name="AVC Configuration Box";
f.Af=R(d);f.tf=R(d);f.Pf=R(d);f.sf=R(d);f.Hf=R(d)&3;h=R(d)&31;f.sps=[];for(g=0;g<h;g++)f.sps.push(td(d,Q(d)));h=R(d)&31;f.pps=[];for(g=0;g<h;g++)f.pps.push(td(d,Q(d)));d.u(sd(d,f));break;case "btrt":f.name="Bit Rate Box";f.xf=N(d);f.Jf=N(d);f.uf=N(d);break;case "stts":f.name="Decoding Time to Sample Box";P(d,f);f.table=ud(d,N(d),2,["count","delta"]);break;case "stss":f.name="Sync Sample Box";P(d,f);f.Rf=pd(d,N(d));break;case "stsc":f.name="Sample to Chunk Box";P(d,f);f.table=ud(d,N(d),3,["firstChunk",
"samplesPerChunk","sampleDescriptionId"]);break;case "stsz":f.name="Sample Size Box";P(d,f);f.Ad=N(d);h=N(d);0==f.Ad&&(f.table=pd(d,h));break;case "stco":f.name="Chunk Offset Box";P(d,f);f.table=pd(d,N(d));break;case "smhd":f.name="Sound Media Header Box";P(d,f);f.vf=(Q(d)<<16>>16)/256;rd(d,2);break;case "mdat":f.name="Media Data Box";f.data=td(d,sd(d,f));break;default:d.u(sd(d,f))}d=f;d.type in c?(f=c[d.type],f instanceof Array||(c[d.type]=[f]),c[d.type].push(d)):c[d.type]=d;if(e&&d.type==e)break}},
P=function(a,b){b.version=R(a);var c=a.c,e=a.G;c>S(a)-3?a=null:(c=e[c+0]<<16|e[c+1]<<8|e[c+2],a.seek(a.c+3),a=c);b.Bf=a},sd=function(a,b){return b.size-(a.c-b.offset)},O=function(a,b,c){var e=b.Bc(b.c,sd(b,c));vd(a,e,c);b.u(S(e)-e.start)};var T=function(a){this.l=a.canvas;this.Kb=null;this.qa=a.poster;this.Fa=a.stream;this.Ed=a.L;this.W=30;this.da=a.P;this.o=Fa(this.Ed,!this.da,!1);this.Jd=a.ga;this.xe=a.loop;this.Lc=a.Ja;this.ca=a.J;this.Rd=function(){};this.Fe=this.da?this.Be:this.Ce;this.Sb=wd(this,{P:this.da},this.Fe);this.Rc=this.da?this.l.getContext("2d"):null;this.j=null;this.pa=this.O=0;this.Bb=!0;this.ma=0;this.K=1;this.Qd=0;this.Wc=vc();this.Ra={};this.Ac=vc();this.ub=this.nb=!1;this.Me=100;a.Wa&&this.buffer()},wd=function(a,
b,c){var e=new Ea;e.da=b&&b.P;e.nc=t(c,a);return e},xd=function(a,b){b.Ib+=1;b.Lb+=1;var c=u();b.Jb||(b.Jb=c);var e=c-b.Jb;b.va=e/1E3;if(b.Za){if(1E3<c-b.Za){var d=b.Lb/(c-b.Za)*1E3;b.Za=c;b.Lb=0;d<b.Yc&&(b.Yc=d);d>b.Xc&&(b.Xc=d);b.ba=d}d=b.Ib/e*1E3;b.bc=d;a.Rd(a.o)}else b.Za=c};
T.prototype.Ce=function(a,b,c){xd(this,this.o);if(a&&this.Bb){this.Kb||(this.l.width=b,this.l.height=c,this.Kb=new cc(this.l,new Sb(b,c)));var e=this.Kb;b*=c;c=b>>2;e.Vd.fill(a.subarray(0,b));e.Pd.fill(a.subarray(b,b+c));e.Sd.fill(a.subarray(b+c,b+2*c));a=this.Kb;a.a.drawArrays(a.a.TRIANGLE_STRIP,0,4)}};T.prototype.Be=function(a,b,c){xd(this,this.o);a&&this.Bb&&(b=this.Rc.createImageData(b,c),b.data.set(a),this.Rc.putImageData(b,0,0))};
var yd=function(a,b){a.Fa.uc(function(){var a=this.Fa.dc();this.Ba=new nd(a);this.ud(b)}.bind(a))};T.prototype.ud=function(a){if(0>this.Me--)E(G,"Mp4Player unable to read stream bailing out.");else{try{var b=this.Ba;b.source.seek(0);vd(b,b.source,new jd,"moov")}catch(c){if(c instanceof RangeError){L(t(this.ud,this,a),250);return}throw c;}b=this.Ba.Fb[1];this.j=new Sb(b.U.tkhd.width,b.U.tkhd.height);this.j=this.j.ceil();a()}};
T.prototype.stop=function(){zd(this);this.ca.xc();this.Fa.stop();Ad(this);this.Ac.resolve()};T.prototype.stop=T.prototype.stop;T.prototype.fb=function(){l.clearTimeout(this.pa);this.pa=0};T.prototype.buffer=function(){this.nb||this.Ba?E(G,"Buffer was called multiple times.  It should only be called once."):(this.nb=!0,yd(this,function(){var a=this.ub;this.ub=this.nb=!1;a&&this.play()}.bind(this)))};T.prototype.buffer=T.prototype.buffer;
T.prototype.play=function(){Ad(this);var a=this.Ba;if(this.nb)this.ub=!0;else if(a){this.l.width=this.j.width;this.l.height=this.j.height;this.Ha=a.Fb[1];var a=this.Ha.U.mdia.minf.stbl.stsd.avc1.avcC,b=a.pps[0];this.Sb.decode(a.sps[0]);this.Sb.decode(b);a=this.Ha;a=Math.ceil(a.U.mdia.minf.stbl.stsz.table.length*a.U.mdia.mdhd.Ld/a.U.mdia.mdhd.duration);this.W=null!=a&&0<a?a:30;zd(this);this.Bb=!this.Lc;this.Lc?this.pa=L(t(this.Sc,this,this),1E3/this.W):(this.ca.zb(),Bd(this),this.pa=L(t(this.eb,this),
1E3/this.W))}else this.ub=!0,this.buffer()};T.prototype.play=T.prototype.play;var zd=function(a){a.O=0;a.o=Fa(a.Ed,!a.da,!1);a.o.cc=a.W;a.K=1};T.prototype.Sc=function(){1<=this.o.va&&6<=this.o.ba||5<=this.o.va||this.O>=this.Ba.Dc?0<this.o.ba&&6>this.o.ba?(E(G,"Benchmark FPS too low. Displaying poster."),Cd(this)):(this.Bb=!0,this.ca.zb(),Bd(this),zd(this),this.pa=L(t(this.eb,this),1E3/this.W)):this.Ha.fc(this.O,t(this.$c,this,!0,t(this.Sc,this)),t(this.hc,this))};
var Dd=function(a,b){var c=a.l.parentNode||a.qa.parentNode;if(c){var e="",d="";b&&(e="scale("+a.qa.width/a.j.width+", "+a.qa.height/a.j.height+")",d="0 0");Fc(c,{transform:e,"-moz-transform":e,"-ms-transform":e,"-o-transform":e,"-webkit-transform":e,"-moz-transform-origin":d,"-ms-transform-origin":d,"-o-transform-origin":d,"-webkit-transform-origin":d,"transform-origin":d})}},Bd=function(a){a.qa.parentNode&&!a.l.parentNode&&(Dd(a,!0),bc(a.l,a.qa))},Ad=function(a){a.l.parentNode&&!a.qa.parentNode&&
(Dd(a,!1),bc(a.qa,a.l))};k=T.prototype;
k.eb=function(){this.pa&&(!this.o.Vc&&5<this.o.va&&0<this.o.ba&&8>this.o.ba?(E(G,"FPS too low. Displaying poster."),Cd(this)):(250<u()-this.Qd&&(this.ca.Ab(),this.Qd=u()),this.O==Math.ceil(this.Jd*this.W/4*this.K)&&(this.ca.yb(this.K),this.K=Ga(this.K)),this.O>=this.Jd*this.W||this.O>=this.Ba.Dc?(this.ca.Ab(),this.Fa.stop(),zd(this),this.xe?(Bd(this),this.ca.wc(),this.ma++,this.o.pb=this.ma,this.yc(this.ma),this.eb()):this.stop()):this.Ha.fc(this.O,t(this.$c,this,!1,t(this.eb,this)),t(this.hc,this))))};
k.hb=function(){return this.O/this.W};k.$c=function(a,b,c){null!=c?this.Sb.decode(c):(this.O++,b&&(a?a=0:(c=this.o.Jb)?(a=1E3/this.W,c+=this.O*a,c=u()-c,a-=c,a=0>a?0:a):a=0,this.pa=L(t(b,this),a)))};k.hc=function(a,b){L(t(this.Ha.fc,this.Ha,a,b,t(this.hc,this)),250)};k.yc=function(a){this.Ra[a]&&this.Ra[a].resolve()};var Cd=function(a){a.stop();a.o.Vc=!0;Ad(a);a.ca.vd();a.Wc.resolve()};var Ed=function(){};ba("studiocodec.stream.IStream",Ed);Ed.prototype.dc=function(){};Ed.prototype.uc=function(){};Ed.prototype.stop=function(){};var Fd=function(a,b,c){this.G=a;this.c=this.start=b||0;this.Uc=b&&c?b+c:null},S=function(a){return a.Uc||a.G.length},td=function(a,b){if(null==b||a.c>S(a)-b)return null;var c=a.G.subarray(a.c,a.c+b);a.seek(a.c+b);return c},ud=function(a,b,c,e){c=c||1;if(a.c>S(a)-b*c*4)return null;for(var d=Array(b),g=0;g<b;g++){for(var f={},h=0;h<c;h++)f[e[h]]=N(a);d[g]=f}return d},pd=function(a,b){if(a.c>S(a)-4*b)return null;for(var c=new Uint32Array(b),e=0;e<b;e++)c[e]=N(a);return c},R=function(a){if(a.c>=S(a))return null;
var b=a.G[a.c];a.seek(a.c+1);return b},Q=function(a){if(a.c>=S(a)-1)return null;var b=a.G[a.c+0]<<8|a.G[a.c+1];a.seek(a.c+2);return b},M=function(a,b){var c=a.c,e=a.G;if(c>S(a)-4)return null;c=e[c+0]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3];b&&a.seek(a.c+4);return c},N=function(a){return M(a,!0)>>>0},od=function(a){var b=a.c;if(b>S(a)-4)return null;for(var c="",e=0;4>e;e++)c+=String.fromCharCode(a.G[b+e]);a.seek(a.c+4);return c},qd=function(a,b){for(var c="",e=0;e<b;e++){var d=R(a);d&&(c+=String.fromCharCode(d))}return c};
Fd.prototype.u=function(a){this.seek(this.c+a)};var rd=function(a,b){for(var c=0;c<b;c++)R(a)};Fd.prototype.seek=function(a){if(0>a||a>S(this))throw a="seek index out of bounds (bounds: [0, "+S(this)+"], index: "+a+").",E(G,a),new RangeError(a);this.c=a};Fd.prototype.Bc=function(a,b){if(a+b>S(this))throw a="subStream index out of bounds (bounds: [0, "+S(this)+"], index: "+(a+b)+").",E(G,a),new RangeError(a);return new Fd(this.G,a,b)};
Fd.prototype.subarray=function(a,b){if(b>S(this))throw a="subarray index out of bounds (bounds: [0, "+S(this)+"], index: "+b+").",E(G,a),new RangeError(a);return this.G.subarray(a,b)};var U=function(a,b){Fd.call(this,a);this.ic=!1;this.xd=b};v(U,Fd);U.prototype.u=function(a){var b=this.c+a;S(this)<this.c+a&&(b=S(this));this.seek(b)};U.prototype.seek=function(a){try{U.$.seek.call(this,a),Gd(this,!1)}catch(b){throw b instanceof RangeError&&Gd(this,!0),b;}};U.prototype.Bc=function(a,b){try{return U.$.Bc.call(this,a,b)}catch(c){throw c instanceof RangeError&&Gd(this,!0),c;}};
U.prototype.subarray=function(a,b){try{return U.$.subarray.call(this,a,b)}catch(c){throw c instanceof RangeError&&Gd(this,!0),c;}};var Gd=function(a,b){!a.ic&&(3E5>S(a)-a.c||b)&&(a.ic=!0,a.xd&&a.xd())};var Hd=function(a,b){this.A=a;this.Qa=0;this.fa=new Uint8Array(0);this.Ea=0;this.Ub=[];this.ha=b;this.lc=!1;this.Oa=0};Hd.prototype.dc=function(){var a=new U(this.fa,t(this.Ne,this));this.Ub.push(a);return a};Hd.prototype.Ne=function(){if(!this.lc){this.lc=!0;var a=t(function(){this.ha===this.b.response.length&&Id(this)},this);4==this.b.readyState?a():J(this.b,"load",a)}};Hd.prototype.uc=function(a){this.oc=a;Id(this)};
var Id=function(a){a.Qa=0;a.lc=!1;a.b=new XMLHttpRequest;a.b.overrideMimeType("text/plain; charset=x-user-defined");a.b.open("GET",Jd(a),!0);a.b.onprogress=t(a.Je,a);a.b.send(null)},Jd=function(a){if(!a.ha)return a.A;var b=a.Oa+"-"+(a.Oa+a.ha-1);a.Oa+=a.ha;a=[a.A,"&","range"];null!=b&&a.push("=",encodeURIComponent(String(b)));if(a[1]){var b=a[0],c=b.indexOf("#");0<=c&&(a.push(b.substr(c)),a[0]=b=b.substr(0,c));c=b.indexOf("?");0>c?a[1]="?":c==b.length-1&&(a[1]=void 0)}return a.join("")};
Hd.prototype.Je=function(a){var b=this.b.response.length;if(!(3>this.b.readyState||b===this.Qa||0===b)&&(100===Math.round(100*a.loaded/a.total)||6E5<=a.loaded+this.Oa)){var c=4==this.b.readyState?0:a.total-a.loaded;a=this.b.response;var e=a.length-this.Qa,d=this.fa;if(0<this.ha&&this.fa.length-this.Ea<e+c)d=new Uint8Array(e+c+this.Ea),d.set(this.fa);else if(!this.ha||0>=this.ha)d=new Uint8Array(e+this.fa.length),d.set(this.fa);for(c=0;c<e;c++)d[this.Ea+c]=a.charCodeAt(this.Qa+c)&255;this.Ea+=e;this.fa=
d;for(a=0;a<this.Ub.length;a++)e=this.Ub[a],d=this.fa,c=this.Ea,e.G=d,e.Uc=c||d.length,e.ic=!1;this.Qa=b;this.oc&&(this.oc(),this.oc=null)}};Hd.prototype.stop=function(){this.b&&this.b.abort()};var Kd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/,Ld=function(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var e=a[c].indexOf("="),d,g=null;0<=e?(d=a[c].substring(0,e),g=a[c].substring(e+1)):d=a[c];b(d,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}};var Md=function(){};Md.prototype.Mc=null;var Od=function(a){var b;(b=a.Mc)||(b={},Nd(a)&&(b[0]=!0,b[1]=!0),b=a.Mc=b);return b};var Pd,Qd=function(){};v(Qd,Md);var Rd=function(a){return(a=Nd(a))?new ActiveXObject(a):new XMLHttpRequest},Nd=function(a){if(!a.bd&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var e=b[c];try{return new ActiveXObject(e),a.bd=e}catch(d){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.bd};Pd=new Qd;var V=function(a){K.call(this);this.headers=new B;this.Ob=a||null;this.aa=!1;this.Nb=this.b=null;this.Pa=this.gd=this.ob="";this.ka=this.jc=this.lb=this.Wb=!1;this.Xa=0;this.Eb=null;this.Sa="";this.Gb=this.Ie=this.Ud=!1};v(V,K);V.prototype.w=Gb("goog.net.XhrIo");var Sd=/^https?$/i,Td=["POST","PUT"];
V.prototype.send=function(a,b,c,e){if(this.b)throw Error("[goog.net.XhrIo] Object is active with another request="+this.ob+"; newUri="+a);b=b?b.toUpperCase():"GET";this.ob=a;this.Pa="";this.gd=b;this.Wb=!1;this.aa=!0;this.b=this.Ob?Rd(this.Ob):Rd(Pd);this.Nb=this.Ob?Od(this.Ob):Od(Pd);this.b.onreadystatechange=t(this.rd,this);this.Ie&&"onprogress"in this.b&&(this.b.onprogress=t(function(a){this.qd(a,!0)},this),this.b.upload&&(this.b.upload.onprogress=t(this.qd,this)));try{F(this.w,W(this,"Opening Xhr")),
this.jc=!0,this.b.open(b,String(a),!0),this.jc=!1}catch(g){F(this.w,W(this,"Error opening Xhr: "+g.message));Ud(this,g);return}a=c||"";var d=this.headers.clone();e&&$a(e,function(a,b){d.set(b,a)});e=Qa(d.X());c=l.FormData&&a instanceof l.FormData;!(0<=Na(Td,b))||e||c||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");d.forEach(function(a,b){this.b.setRequestHeader(b,a)},this);this.Sa&&(this.b.responseType=this.Sa);"withCredentials"in this.b&&this.b.withCredentials!==this.Ud&&
(this.b.withCredentials=this.Ud);try{Vd(this),0<this.Xa&&(this.Gb=Wd(this.b),F(this.w,W(this,"Will abort after "+this.Xa+"ms if incomplete, xhr2 "+this.Gb)),this.Gb?(this.b.timeout=this.Xa,this.b.ontimeout=t(this.Nd,this)):this.Eb=L(this.Nd,this.Xa,this)),F(this.w,W(this,"Sending request")),this.lb=!0,this.b.send(a),this.lb=!1}catch(g){F(this.w,W(this,"Send error: "+g.message)),Ud(this,g)}};var Wd=function(a){return C&&D(9)&&fa(a.timeout)&&m(a.ontimeout)},Pa=function(a){return"content-type"==a.toLowerCase()};
V.prototype.Nd=function(){"undefined"!=typeof aa&&this.b&&(this.Pa="Timed out after "+this.Xa+"ms, aborting",F(this.w,W(this,this.Pa)),this.dispatchEvent("timeout"),this.abort(8))};var Ud=function(a,b){a.aa=!1;a.b&&(a.ka=!0,a.b.abort(),a.ka=!1);a.Pa=b;Xd(a);Yd(a)},Xd=function(a){a.Wb||(a.Wb=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))};
V.prototype.abort=function(){this.b&&this.aa&&(F(this.w,W(this,"Aborting")),this.aa=!1,this.ka=!0,this.b.abort(),this.ka=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Yd(this))};V.prototype.ia=function(){this.b&&(this.aa&&(this.aa=!1,this.ka=!0,this.b.abort(),this.ka=!1),Yd(this,!0));V.$.ia.call(this)};V.prototype.rd=function(){this.La||(this.jc||this.lb||this.ka?Zd(this):this.De())};V.prototype.De=function(){Zd(this)};
var Zd=function(a){if(a.aa&&"undefined"!=typeof aa)if(a.Nb[1]&&4==$d(a)&&2==ae(a))F(a.w,W(a,"Local request error detected and ignored"));else if(a.lb&&4==$d(a))L(a.rd,0,a);else if(a.dispatchEvent("readystatechange"),4==$d(a)){F(a.w,W(a,"Request complete"));a.aa=!1;try{var b=ae(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}var e;if(!(e=c)){var d;if(d=0===b){var g=String(a.ob).match(Kd)[1]||null;if(!g&&l.self&&l.self.location)var f=l.self.location.protocol,
g=f.substr(0,f.length-1);d=!Sd.test(g?g.toLowerCase():"")}e=d}if(e)a.dispatchEvent("complete"),a.dispatchEvent("success");else{var h;try{h=2<$d(a)?a.b.statusText:""}catch(p){F(a.w,"Can not get status: "+p.message),h=""}a.Pa=h+" ["+ae(a)+"]";Xd(a)}}finally{Yd(a)}}};V.prototype.qd=function(a,b){x("progress"===a.type,"goog.net.EventType.PROGRESS is of the same type as raw XHR progress.");this.dispatchEvent(be(a,"progress"));this.dispatchEvent(be(a,b?"downloadprogress":"uploadprogress"))};
var be=function(a,b){return{type:b,lengthComputable:a.lengthComputable,loaded:a.loaded,total:a.total}},Yd=function(a,b){if(a.b){Vd(a);var c=a.b,e=a.Nb[0]?da:null;a.b=null;a.Nb=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=e}catch(d){E(a.w,"Problem encountered resetting onreadystatechange: "+d.message)}}},Vd=function(a){a.b&&a.Gb&&(a.b.ontimeout=null);fa(a.Eb)&&(l.clearTimeout(a.Eb),a.Eb=null)},$d=function(a){return a.b?a.b.readyState:0},ae=function(a){try{return 2<$d(a)?a.b.status:-1}catch(b){return-1}},
ce=function(a){try{if(!a.b)return null;if("response"in a.b)return a.b.response;switch(a.Sa){case "":case "text":return a.b.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.b)return a.b.mozResponseArrayBuffer}E(a.w,"Response type "+a.Sa+" is not supported on this browser");return null}catch(b){return F(a.w,"Can not get response: "+b.message),null}};V.prototype.getResponseHeader=function(a){if(this.b&&4==$d(this))return a=this.b.getResponseHeader(a),null===a?void 0:a};
var W=function(a,b){return b+" ["+a.gd+" "+a.ob+" "+ae(a)+"]"};var de=function(a){this.b=new V;this.A=a;this.Ec=null};de.prototype.dc=function(){if(!this.Ec)throw"Stream content not loaded";return new Fd(new Uint8Array(this.Ec))};de.prototype.uc=function(a){this.b.Sa="arraybuffer";J(this.b,"complete",t(function(){this.Ec=ce(this.b);a()},this));this.b.send(this.A,"GET")};de.prototype.stop=function(){this.b&&this.b.abort()};var ee=function(){this.Y=!1};k=ee.prototype;k.vc=function(){m(window.Enabler)&&Enabler.counter("Video Teaser Clicks",!0)};k.wc=function(){m(window.Enabler)&&Enabler.counter("Video Teaser Loops",!0)};k.yb=function(a){if(m(window.Enabler))switch(a){case 1:Enabler.counter("Video Teaser Quartile 1",!0);break;case 2:Enabler.counter("Video Teaser Quartile 2",!0);break;case 3:Enabler.counter("Video Teaser Quartile 3",!0);break;case 4:Enabler.counter("Video Teaser Quartile 4",!0)}};
k.zb=function(){m(window.Enabler)&&!this.Y&&(Enabler.startTimer("Video Teaser Timer"),this.Y=!0)};k.xc=function(){m(window.Enabler)&&this.Y&&(Enabler.stopTimer("Video Teaser Timer"),this.Y=!1)};k.vd=da;k.Ab=da;var X=function(a,b){var c;c=document.createEvent("Event");c.initEvent(b,!0,!0);a.dispatchEvent(c)};var fe=function(a){this.Y=!1;this.M=a};k=fe.prototype;k.vc=function(){X(this.M,"Video Teaser Clicks")};k.wc=function(){X(this.M,"Video Teaser Loops")};k.yb=function(a){switch(a){case 1:X(this.M,"Video Teaser Quartile 1");break;case 2:X(this.M,"Video Teaser Quartile 2");break;case 3:X(this.M,"Video Teaser Quartile 3");break;case 4:X(this.M,"Video Teaser Quartile 4")}};k.zb=function(){this.Y||(X(this.M,"Start Video Teaser Timer"),this.Y=!0)};
k.xc=function(){this.Y&&(X(this.M,"Stop Video Teaser Timer"),this.Y=!1)};k.vd=function(){X(this.M,"Video Teaser Fallback")};k.Ab=function(){X(this.M,"Video Teaser Time Update")};var ge=function(a,b){this.video=a;this.src=b.src;this.tc=b.tc;this.width=b.width;this.height=b.height;this.ga=b.ga;this.P=b.P;this.L=b.L;this.loop=b.loop;this.Da=b.Da;this.Ja=b.Ja;this.ne=b.Ue;this.sb=!1;this.Wa=b.Wa;this.dd=!1;this.poster=H("IMG",{src:this.tc,width:this.width,height:this.height});this.Ua=Fa(b.L,!b.P,!0);a:{if(a=b.ze)switch(a){case 1:a=new ee;break a;case 2:a=new fe(this.video);break a}a=Xb()?new fe(this.video):new ee}this.J=a},ie=function(a,b){a.video.ue&&a.video.setAttribute("controls",
!0);a.video.setAttribute("webkit-playsinline","");Fc(a.video,"object-fit","fill");a.f.className=a.video.className;a.f.style.cssText=a.video.style.cssText;a.Ge=J(a.f,"click",b,!1,a);b=a.video;b.parentNode&&b.parentNode.insertBefore(a.f,b.nextSibling);he(a.f,a.video);a.dd=!0};ge.prototype.isInitialized=function(){return this.dd};ge.prototype.gc=function(){return this.Ua};
var he=function(a,b){var c;c=b.style[za("display")];c="undefined"!==typeof c?c:b.style[Ec(b,"display")]||"";Fc(a,"display",c);Fc(b,"display","none")};var je=function(a,b){ge.call(this,a,b);this.f=H("DIV");this.cb=H("DIV");Fc(this.cb,{width:this.width+"px",height:this.height+"px",overflow:"hidden"});this.Nc=H("DIV");this.l=H("CANVAS");a=H("DIV");Fc(a,{"z-index":100,position:"absolute",bottom:0,"background-color":"rgba(0, 0, 0, 0.8)",height:30,width:"100%","text-align":"left"});this.Qc=a;a=H("DIV");Fc(a,{"font-family":"verdana, sans-serif","font-size":14,"font-weight":"bold",padding:6,color:"yellow"});this.cd=a;this.Fa=this.L?new Hd(this.src,this.ne):
new de(this.src);this.ya=new T({stream:this.Fa,canvas:this.l,poster:this.poster,ga:this.ga,L:this.L,P:this.P,loop:this.loop,Da:this.Da,Ja:this.Ja,J:this.J,Wa:this.Wa});this.Nc.appendChild(this.l);this.cb.appendChild(this.Nc);this.f.appendChild(this.cb);this.ya.Rd=this.$e.bind(this);this.Da&&(this.Qc.appendChild(this.cd),this.cb.appendChild(this.Qc))};v(je,ge);k=je.prototype;k.init=function(){Ad(this.ya);var a=je.prototype.rc;this.Ua=Fa(this.L,!this.P,!1);ie(this,a)};
k.rc=function(){this.video.volume=1;this.J.vc();this.video.play()};k.oa=function(){this.sb||this.ya.play()};k.Cb=function(){this.ya.stop();this.ya.fb()};k.hb=function(){return this.ya.hb()};k.$e=function(a){this.Ua=a;if(this.Da&&0==a.Ib%10){var b=[];a.cc&&b.push("target:",a.cc);a.ba&&b.push("fps:",a.ba.toFixed(2));a.bc&&b.push("avg:",a.bc.toFixed(2));a.va&&b.push("sec:",a.va.toFixed(2));a.pb&&b.push("loops:",a.pb);a.L&&b.push("stream");a.bf&&b.push("webgl");this.cd.innerHTML=b.join(" ")}};var ke=function(a,b){ge.call(this,a,b);this.f=H("VIDEO");this.ma=this.sc=0;this.K=1;this.Wc=vc();this.Ra={};this.Ac=vc()};v(ke,ge);ke.prototype.init=function(){this.f.addEventListener("timeupdate",t(function(){this.J.Ab()},this));le(this);var a=ke.prototype.rc;this.Ua=Fa(this.L,!this.P,!0);ie(this,a);me(this);ne(this)};
var me=function(a){a.f.className=a.video.className;a.f.style.cssText=a.video.style.cssText;a.f.style.display="";a.f.style.width=a.width+"px";a.f.style.height=a.height+"px"},ne=function(a){if(null==a.video.src||/^[\s\xa0]*$/.test(a.video.src))for(var b=a.video.querySelectorAll("SOURCE"),c=0;c<b.length;c++){if(b[c].src&&b[c].type){var e=H("SOURCE");e.src=b[c].src;e.type=b[c].type;a.f.appendChild(e)}}else a.f.src=a.video.src};k=ke.prototype;k.rc=function(){this.J.vc();this.video.play()};
k.oa=function(){this.sb||(this.J.zb(),this.f.src=this.src,me(this),this.f.volume=0,this.f.play(),this.sc=L(this.jd,1E3*this.ga,this),this.xb=new id(1E3*this.ga/4),J(this.xb,"tick",this.Le,!1,this),this.xb.start())};k.Cb=function(){le(this);this.K=1;this.J.xc();try{this.f.currentTime=0,this.f.pause(),this.Ac.resolve()}catch(a){}null!=this.xb&&this.xb.stop();l.clearTimeout(this.sc)};k.Le=function(){4!=this.K&&this.J.yb(this.K);this.K=Ga(this.K)};
k.jd=function(){this.J.yb(4);this.loop?(this.J.wc(),this.ma++,this.Ua.pb=this.ma,this.yc(this.ma),this.f.currentTime=0,this.sc=L(this.jd,1E3*this.ga,this)):this.Cb()};var le=function(a){var b=H("VIDEO");b.poster=a.poster.src;b.removeAttribute("src");bc(b,a.f);a.f=b;a.f.load()};ke.prototype.hb=function(){return this.f.currentTime};ke.prototype.yc=function(a){this.Ra[a]&&this.Ra[a].resolve()};var oe=function(a,b){this.B=this.ra=this.ea="";this.za=null;this.ja=this.xa="";this.D=this.ve=!1;var c;a instanceof oe?(this.D=m(b)?b:a.D,pe(this,a.ea),c=a.ra,Y(this),this.ra=c,c=a.B,Y(this),this.B=c,qe(this,a.za),c=a.getPath(),Y(this),this.xa=c,re(this,a.R.clone()),a=a.ja,Y(this),this.ja=a):a&&(c=String(a).match(Kd))?(this.D=!!b,pe(this,c[1]||"",!0),a=c[2]||"",Y(this),this.ra=se(a),a=c[3]||"",Y(this),this.B=se(a,!0),qe(this,c[4]),a=c[5]||"",Y(this),this.xa=se(a,!0),re(this,c[6]||"",!0),a=c[7]||"",
Y(this),this.ja=se(a)):(this.D=!!b,this.R=new te(null,0,this.D))};
oe.prototype.toString=function(){var a=[],b=this.ea;b&&a.push(ue(b,ve,!0),":");var c=this.B;if(c||"file"==b)a.push("//"),(b=this.ra)&&a.push(ue(b,ve,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.za,null!=c&&a.push(":",String(c));if(c=this.getPath())this.B&&"/"!=c.charAt(0)&&a.push("/"),a.push(ue(c,"/"==c.charAt(0)?xe:ye,!0));(c=this.R.toString())&&a.push("?",c);(c=this.ja)&&a.push("#",ue(c,ze));return a.join("")};
oe.prototype.resolve=function(a){var b=this.clone(),c=!!a.ea;c?pe(b,a.ea):c=!!a.ra;if(c){var e=a.ra;Y(b);b.ra=e}else c=!!a.B;c?(e=a.B,Y(b),b.B=e):c=null!=a.za;e=a.getPath();if(c)qe(b,a.za);else if(c=!!a.xa){if("/"!=e.charAt(0))if(this.B&&!this.xa)e="/"+e;else{var d=b.getPath().lastIndexOf("/");-1!=d&&(e=b.getPath().substr(0,d+1)+e)}d=e;if(".."==d||"."==d)e="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var e=0==d.lastIndexOf("/",0),d=d.split("/"),g=[],f=0;f<d.length;){var h=d[f++];"."==
h?e&&f==d.length&&g.push(""):".."==h?((1<g.length||1==g.length&&""!=g[0])&&g.pop(),e&&f==d.length&&g.push("")):(g.push(h),e=!0)}e=g.join("/")}else e=d}c?(Y(b),b.xa=e):c=""!==a.R.toString();c?re(b,a.R.clone()):c=!!a.ja;c&&(a=a.ja,Y(b),b.ja=a);return b};oe.prototype.clone=function(){return new oe(this)};var pe=function(a,b,c){Y(a);a.ea=c?se(b,!0):b;a.ea&&(a.ea=a.ea.replace(/:$/,""))},qe=function(a,b){Y(a);if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.za=b}else a.za=null};
oe.prototype.getPath=function(){return this.xa};var re=function(a,b,c){Y(a);b instanceof te?(a.R=b,a.R.zc(a.D)):(c||(b=ue(b,Ae)),a.R=new te(b,0,a.D))},Y=function(a){if(a.ve)throw Error("Tried to modify a read-only Uri");};oe.prototype.zc=function(a){this.D=a;this.R&&this.R.zc(a);return this};
var se=function(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""},ue=function(a,b,c){return q(a)?(a=encodeURI(a).replace(b,Be),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null},Be=function(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)},ve=/[#\/\?@]/g,ye=/[\#\?:]/g,xe=/[\#\?]/g,Ae=/[\#\?@]/g,ze=/#/g,te=function(a,b,c){this.i=this.g=null;this.C=a||null;this.D=!!c},Ce=function(a){a.g||(a.g=new B,a.i=0,a.C&&Ld(a.C,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g,
" ")),c)}))};k=te.prototype;k.add=function(a,b){Ce(this);this.C=null;a=De(this,a);var c=this.g.get(a);c||this.g.set(a,c=[]);c.push(b);this.i=La(this.i)+1;return this};k.remove=function(a){Ce(this);a=De(this,a);return this.g.Ka(a)?(this.C=null,this.i=La(this.i)-this.g.get(a).length,this.g.remove(a)):!1};k.Ka=function(a){Ce(this);a=De(this,a);return this.g.Ka(a)};k.X=function(){Ce(this);for(var a=this.g.H(),b=this.g.X(),c=[],e=0;e<b.length;e++)for(var d=a[e],g=0;g<d.length;g++)c.push(b[e]);return c};
k.H=function(a){Ce(this);var b=[];if(q(a))this.Ka(a)&&(b=Ra(b,this.g.get(De(this,a))));else{a=this.g.H();for(var c=0;c<a.length;c++)b=Ra(b,a[c])}return b};k.set=function(a,b){Ce(this);this.C=null;a=De(this,a);this.Ka(a)&&(this.i=La(this.i)-this.g.get(a).length);this.g.set(a,[b]);this.i=La(this.i)+1;return this};k.get=function(a,b){a=a?this.H(a):[];return 0<a.length?String(a[0]):b};
k.toString=function(){if(this.C)return this.C;if(!this.g)return"";for(var a=[],b=this.g.X(),c=0;c<b.length;c++)for(var e=b[c],d=encodeURIComponent(String(e)),e=this.H(e),g=0;g<e.length;g++){var f=d;""!==e[g]&&(f+="="+encodeURIComponent(String(e[g])));a.push(f)}return this.C=a.join("&")};k.clone=function(){var a=new te;a.C=this.C;this.g&&(a.g=this.g.clone(),a.i=this.i);return a};var De=function(a,b){b=String(b);a.D&&(b=b.toLowerCase());return b};
te.prototype.zc=function(a){a&&!this.D&&(Ce(this),this.C=null,this.g.forEach(function(a,c){var b=c.toLowerCase();c!=b&&(this.remove(c),this.remove(b),0<a.length&&(this.C=null,this.g.set(De(this,b),Sa(a)),this.i=La(this.i)+a.length))},this));this.D=a};var Z=function(){if(!r(this.Gc))throw"Custom element must be registered with ci.common.CustomElement.register.";return new this.Gc};v(Z,HTMLVideoElement);ba("studiocodec.VideoTeaser",Z);
Z.prototype.createdCallback=function(){this.ue=Ee(this);this.Ta=this.Hd=this.Dd=this.pd=this.od=this.nd=this.md=!1;this.Fd=null;this.v=window.Enabler;this.b=new V;this.Pb=new V;this.tb=new V;this.ad=this.fd=!1;this.kd=null;this.Zb=!1;Object.defineProperty(this,"teaserCurrentTime",{get:function(){return this.F?this.F.hb():0}})};Z.prototype.createdCallback=Z.prototype.createdCallback;var Ee=function(a){var b=a.controls;a.removeAttribute("controls");return b};
Z.prototype.attachedCallback=function(){var a=this.getAttribute("nobenchmark"),b=this.getAttribute("nonative"),c=this.getAttribute("nostream"),e=this.getAttribute("nowebgl"),d=this.getAttribute("stats"),g=this.getAttribute("teaserexpandplay"),f=this.getAttribute("teaserpreload"),h=this.getAttribute("teasermanualplay"),p=this.getAttribute("teasermetrics"),p=p?p.toLowerCase():p;this.md=null!=a;this.nd=null!=b;this.od=null!=c;this.pd=null!=e;this.Dd=null!=d;this.Zb=null!=g;this.kd=Z.ce[p];this.Hd=null!=
f;this.Ta=null==h||this.Ta;null==this.poster||/^[\s\xa0]*$/.test(this.poster)?(E(G,"Poster not found."),a=!1):a=!0;a&&(null!=Fe(this)?a=!0:(E(G,"Video source not found."),a=!1));a&&(a=this.getAttribute("teaserchunksize"),null==a?a=!0:!isNaN(Number(a))&&0<Number(a)?(this.Fd=Number(a),a=!0):(E(G,"Invalid teaser chunk size: :"+a),a=!1));a&&(a=this.getAttribute("teaserduration"),null==a?(this.Gd=Z.Zd,a=!0):!isNaN(Number(a))&&0<a&&a<=Z.be?(this.Gd=Number(a),a=!0):(E(G,"Invalid teaser length: "+a),a=!1));
a&&(a=this.getAttribute("teasersrc"),null!=a?(this.Db=a,a=!0):(E(G,"Teaser video source attribute not found."),a=!1));if(a){var a=[],z;for(z in Ge)null!=this.getAttribute(z)&&a.push(z);0==a.length?a=!0:(E(G,"The following attributes are not supported: "+a.join(" ")),a=!1)}a&&(z=Z.prototype.Hc,null!=Xb()?this.fd||(this.fd=!0,window.addEventListener("adinitialized",t(z,this),!1)):this.Hc())};Z.prototype.attachedCallback=Z.prototype.attachedCallback;k=Z.prototype;
k.Hc=function(){var a=Z.prototype.Ic;null==this.v||this.v.isInitialized()?this.Ic():this.v.addEventListener(studio.events.StudioEvent.INIT,t(a,this))};k.Ic=function(){var a=Z.prototype.Id;null==this.v||this.v.isVisible()?this.Id():this.v.addEventListener(studio.events.StudioEvent.VISIBLE,t(a,this))};
k.Id=function(){this.A=null!=this.v?this.v.getUrl(/^(https?:)?\/\//i.test(this.Db)?this.Db:Z.de+this.Db):Fe(this);null!=this.v&&(this.src=this.v.getUrl(this.Db));J(this.Pb,"complete",t(this.ge,this));this.Pb.send(this.A,"HEAD")};
k.ge=function(){var a=ae(this.Pb);if(400<=a&&500>a)E(G,"Teaser video is being processed for serving. Please try again in a few minutes.");else if(a=new oe(this.A),a.B==Z.$d||a.B==Z.Yd||a.B==Z.ee&&a.getPath()==Z.ae){var b=Z.Wd,c=Z.Xd;Y(a);a.R.set(b,c);this.A=a.toString();J(this.b,"complete",t(this.Jc,this));this.b.send(this.A,"GET")}else He(this)};k.Jc=function(){this.A=ce(this.b);this.tb=new V;J(this.tb,"complete",t(this.je,this));this.tb.send(this.A,"HEAD")};
k.je=function(){var a=this.tb.getResponseHeader("content-type");a&&0<=a.indexOf("text/plain")?(this.b=new V,J(this.b,"complete",t(this.Jc,this)),this.b.send(this.A,"GET")):He(this)};
var He=function(a){var b;b=a.A;var c=a.poster,e=Ie(a,"width"),d=Ie(a,"height"),g=a.Gd,f;if(!(f=a.pd)){f=H("CANVAS");var h=null;try{h=f.getContext("webgl")}catch(p){h=null}if(null==h)try{h=f.getContext("experimental-webgl")}catch(p){h=null}f=null==h}b={src:b,tc:c,width:e,height:d,ga:g,P:f,L:!a.od,loop:a.loop,Da:a.Dd,Ja:!a.md,ze:a.kd,Wa:a.Hd,Ue:a.Fd};if(a.nd)c=!1;else{e=studio.common.Environment.Type;c=studio.common.Environment.hasType(e.IN_APP);e=studio.common.Environment.hasType(e.BROWSER);d="ontouchstart"in
window;if(!d&&e)c="desktopWeb";else if(d&&e)c="mobileWeb";else if(c)c="inApp";else if(hb||ib){b:{c=window.navigator.standalone;if(jb||kb)if(e=/safari/.test(y.toLowerCase()),!c&&!e){c=!0;break b}c=!1}if(!c)b:{if(ib&&(c=y.toLowerCase(),/ wv/.test(c)||/version/.test(c))){c=!0;break b}c=!1}c=c?"inApp":"mobileWeb"}else c="desktopWeb";c="desktopWeb"==c||"inApp"==c}a.F=c?new ke(a,b):new je(a,b);a.F.init();a.Zb?(a.v.addEventListener(studio.events.StudioEvent.EXPAND_START,t(a.oa,a)),a.v.addEventListener(studio.events.StudioEvent.COLLAPSE_START,
t(a.Va,a)),a.v.addEventListener(studio.events.StudioEvent.FULLSCREEN_EXPAND_START,t(a.oa,a)),a.v.addEventListener(studio.events.StudioEvent.FULLSCREEN_COLLAPSE_START,t(a.Va,a))):a.Ta&&a.oa()};Z.prototype.Va=function(){null!=this.F?this.F.Cb():this.Ta=!1};Z.prototype.oa=function(){if(null!=this.F&&this.F.isInitialized()){if(!this.ad||this.Zb)this.ad=!0,this.F.oa()}else this.Ta=!0};Z.prototype.playTeaser=Z.prototype.oa;Z.prototype.detachedCallback=function(){this.Va()};
Z.prototype.detachedCallback=Z.prototype.detachedCallback;Z.prototype.ke=function(){};Z.prototype.attributeChangedCallback=Z.prototype.ke;Z.prototype.fb=function(){this.Va()};Z.prototype.dispose=Z.prototype.fb;Z.prototype.play=function(){if(null!=this.F){var a=this.F;if(!a.sb){dd(a.Ge);he(a.video,a.f);var b=a.f;b&&b.parentNode&&b.parentNode.removeChild(b);a.sb=!0;a.Cb()}}Z.$.play.call(this)};Z.prototype.play=Z.prototype.play;Z.prototype.pause=function(){this.Va();Z.$.pause.call(this)};
Z.prototype.pause=Z.prototype.pause;var Fe=function(a){if(null!=a.src&&!/^[\s\xa0]*$/.test(a.src))return a.src;a=a.querySelectorAll("SOURCE");for(var b=0;b<a.length;b++)if(a[b].src&&a[b].type)return a[b].src;return null};Z.ce={enabler:1,events:2};Z.prototype.gc=function(){return null!=this.F?this.F.gc():null};Z.prototype.getStatistics=Z.prototype.gc;
var Ie=function(a,b){if(a[b])b=a[b];else a:{var c;x(a,"Node cannot be null or undefined.");c=9==a.nodeType?a:a.ownerDocument||a.document;if(c.defaultView&&c.defaultView.getComputedStyle&&(a=c.defaultView.getComputedStyle(a,null))){b=a[b]||a.getPropertyValue(b)||"";break a}b=""}return parseInt(b,10)};Z.Zd=10;Z.be=30;Z.de="VT_";Z.$d="gcdn.2mdn.net";Z.Yd="redirector.googlevideo.com";Z.ee="www.youtube.com";Z.ae="/get_video";Z.Wd="alr";Z.Xd="yes";Z.Fc="video-teaser";Z.EXTENDS=Z.Fc;
var Ba={df:"nobenchmark",ef:"nonative",ff:"nostream",gf:"nowebgl",hf:"stats",jf:"teaserchunksize",kf:"teaserduration",lf:"teaserexpandplay",mf:"teasermanualplay",nf:"teasermetrics",qf:"teasersrc",pf:"teaserpreload"};Z.Attributes=Ba;var Ge={cf:"autoplay"};Z.InvalidAttributes=Ge;var Je=Z.Fc,w=Z;Ba&&Ca();w.prototype.setAttribute=HTMLElement.prototype.setAttribute;w.prototype.getAttribute=HTMLElement.prototype.getAttribute;w.prototype.removeAttribute=HTMLElement.prototype.removeAttribute;var Ke={prototype:w.prototype};
if(w.prototype.$a){var Le=w.prototype.$a;if("video"!=Le)throw oa("Cannot register <%s> with native parent as <%s>. Element's parent class already extends <%s>.",Je,"VIDEO",Le);}else w.prototype.$a="video";w.prototype.$a&&(Ke["extends"]=w.prototype.$a);w.prototype.Gc="registerElement"in document?document.registerElement(Je,Ke):document.register(Je,Ke);}).call(this);
function getYuvAsm(stdlib,foreign,heap){"use asm";var imul=stdlib.Math.imul;var min=stdlib.Math.min;var max=stdlib.Math.max;var pow=stdlib.Math.pow;var out=new stdlib.Uint8Array(heap);var out32=new stdlib.Uint32Array(heap);var inp=new stdlib.Uint8Array(heap);var mem=new stdlib.Uint8Array(heap);var mem32=new stdlib.Uint32Array(heap);var width=0;var height=0;var lumaSize=0;var chromaSize=0;var inpSize=0;var outSize=0;var inpStart=0;var outStart=0;var widthFour=0;var cacheStart=0;function init(parWidth,
parHeight){parWidth=parWidth|0;parHeight=parHeight|0;var i=0;var s=0;width=parWidth;widthFour=imul(parWidth,4)|0;height=parHeight;lumaSize=imul(width|0,height|0)|0;chromaSize=(lumaSize|0)>>2;outSize=imul(imul(width,height)|0,4)|0;inpSize=lumaSize+chromaSize|0+chromaSize|0;outStart=0;inpStart=outStart+outSize|0;cacheStart=inpStart+inpSize|0;s=~~+pow(+2,+24);s=imul(s,4)|0;for(i=0|0;(i|0)<(s|0)|0;i=i+4|0)mem32[(cacheStart+i|0)>>2]=0}function yuvConvert(){var ystart=0;var ustart=0;var vstart=0;var y=
0;var yn=0;var u=0;var v=0;var o=0;var line=0;var col=0;var usave=0;var vsave=0;var ostart=0;var cacheAdr=0;ostart=outStart|0;ystart=inpStart|0;ustart=ystart+lumaSize|0|0;vstart=ustart+chromaSize|0;for(line=0;(line|0)<(height|0);line=line+2|0){usave=ustart;vsave=vstart;for(col=0;(col|0)<(width|0);col=col+2|0){y=inp[ystart>>0]|0;yn=inp[(ystart+width|0)>>0]|0;u=inp[ustart>>0]|0;v=inp[vstart>>0]|0;cacheAdr=((y<<16|0)+(u<<8|0)|0)+v|0;o=mem32[(cacheStart+cacheAdr|0)>>2]|0;if(o);else{o=yuv2RgbCalc(y,u,
v)|0;mem32[(cacheStart+cacheAdr|0)>>2]=o|0}mem32[ostart>>2]=o;cacheAdr=((yn<<16|0)+(u<<8|0)|0)+v|0;o=mem32[(cacheStart+cacheAdr|0)>>2]|0;if(o);else{o=yuv2RgbCalc(yn,u,v)|0;mem32[(cacheStart+cacheAdr|0)>>2]=o|0}mem32[(ostart+widthFour|0)>>2]=o;ostart=ostart+4|0;ystart=ystart+1|0;y=inp[ystart>>0]|0;yn=inp[(ystart+width|0)>>0]|0;cacheAdr=((y<<16|0)+(u<<8|0)|0)+v|0;o=mem32[(cacheStart+cacheAdr|0)>>2]|0;if(o);else{o=yuv2RgbCalc(y,u,v)|0;mem32[(cacheStart+cacheAdr|0)>>2]=o|0}mem32[ostart>>2]=o;cacheAdr=
((yn<<16|0)+(u<<8|0)|0)+v|0;o=mem32[(cacheStart+cacheAdr|0)>>2]|0;if(o);else{o=yuv2RgbCalc(yn,u,v)|0;mem32[(cacheStart+cacheAdr|0)>>2]=o|0}mem32[(ostart+widthFour|0)>>2]=o;ostart=ostart+4|0;ystart=ystart+1|0;ustart=ustart+1|0;vstart=vstart+1|0}ostart=ostart+widthFour|0;ystart=ystart+width|0}}function yuv2RgbCalc(y,u,v){y=y|0;u=u|0;v=v|0;var r=0;var g=0;var b=0;var o=0;var a0=0;var a1=0;var a2=0;var a3=0;var a4=0;a0=imul(1192,y-16|0)|0;a1=imul(1634,v-128|0)|0;a2=imul(832,v-128|0)|0;a3=imul(400,u-128|
0)|0;a4=imul(2066,u-128|0)|0;r=(a0+a1|0)>>10|0;g=((a0-a2|0)-a3|0)>>10|0;b=(a0+a4|0)>>10|0;if((r&255|0)!=(r|0)|0)r=min(255,max(0,r|0))|0;if((g&255|0)!=(g|0)|0)g=min(255,max(0,g|0))|0;if((b&255|0)!=(b|0)|0)b=min(255,max(0,b|0))|0;o=255;o=o<<8|0;o=o+b|0;o=o<<8|0;o=o+g|0;o=o<<8|0;o=o+r|0;return o|0}return{init:init,yuvConvert:yuvConvert}};
