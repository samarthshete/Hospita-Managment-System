<?php$table = 'ipd_general_master';if(isset($_POST['submit'])) {$patient_id=$_POST['patient_id'];$ipd_gen_status=$_POST['ipd_gen_status'];$ipd_admission_date=$_POST['ipd_admission_date'];$bed_allocation_id=$_POST['bed_allocation_id'];$operation_reqd=$_POST['operation_reqd'];$ipd_operation_ref_id=$_POST['ipd_operation_ref_id'];$ipd_attending_doctor_id=$_POST['ipd_attending_doctor_id'];$ipd_gen_staff_list=$_POST['ipd_gen_staff_list'];$ipd_daily_rec_idlist=$_POST['ipd_daily_rec_idlist'];$ipd_discharge_date=$_POST['ipd_discharge_date'];$ipd_discharge_notes=$_POST['ipd_discharge_notes'];$created_by=$_POST['created_by'];$created_on=$_POST['created_on'];$updated_by=$_POST['updated_by'];$updated_on=$_POST['updated_on'];if (session_status() !== PHP_SESSION_ACTIVE) {session_start();}date_default_timezone_set('asia/kolkata');$created_by = $_SESSION['ActiveUserId'];$created_on = date("Y-m-d H:i:s");include_once 'connection.php';$table_fields = "patient_id,ipd_gen_status,ipd_admission_date,bed_allocation_id,operation_reqd,ipd_operation_ref_id,ipd_attending_doctor_id,ipd_gen_staff_list,ipd_daily_rec_idlist,ipd_discharge_date,ipd_discharge_notes,created_by,created_on,updated_by,updated_on";$table_values =  "'$patient_id','$ipd_gen_status','$ipd_admission_date','$bed_allocation_id','$operation_reqd','$ipd_operation_ref_id','$ipd_attending_doctor_id','$ipd_gen_staff_list','$ipd_daily_rec_idlist','$ipd_discharge_date','$ipd_discharge_notes','$created_by','$created_on','$updated_by','$updated_on'";$table_query = "INSERT INTO $table (" . $table_fields . ") VALUES (" . $table_values . ")";if(mysqli_query($con, $table_query)) {echo "<script>alert('New record is added successfully to $table master');window.location.href='dashboard.php?page=crud_$table';</script>";} else {echo "<script>alert('ERROR: 001 - This record can't be added ...');window.location.href='dashboard.php?page=crud_$table';</script>";}} elseif (isset($_GET['action'])) {$action = $_GET['action'];if(isset($_GET['id'])){$id=$_GET['id'];}switch($action){case 'edit':$ipd_gen_status=$_POST['ipd_gen_status'];$ipd_admission_date=$_POST['ipd_admission_date'];$bed_allocation_id=$_POST['bed_allocation_id'];$operation_reqd=$_POST['operation_reqd'];$ipd_operation_ref_id=$_POST['ipd_operation_ref_id'];$ipd_attending_doctor_id=$_POST['ipd_attending_doctor_id'];$ipd_gen_staff_list=$_POST['ipd_gen_staff_list'];$ipd_daily_rec_idlist=$_POST['ipd_daily_rec_idlist'];$ipd_discharge_date=$_POST['ipd_discharge_date'];$ipd_discharge_notes=$_POST['ipd_discharge_notes'];$created_by=$_POST['created_by'];$created_on=$_POST['created_on'];$updated_by=$_POST['updated_by'];$updated_on=$_POST['updated_on'];$table_fields_values = "ipd_gen_status='$ipd_gen_status',ipd_admission_date='$ipd_admission_date',bed_allocation_id='$bed_allocation_id',operation_reqd='$operation_reqd',ipd_operation_ref_id='$ipd_operation_ref_id',ipd_attending_doctor_id='$ipd_attending_doctor_id',ipd_gen_staff_list='$ipd_gen_staff_list',ipd_daily_rec_idlist='$ipd_daily_rec_idlist',ipd_discharge_date='$ipd_discharge_date',ipd_discharge_notes='$ipd_discharge_notes',created_by='$created_by',created_on='$created_on',updated_by='$updated_by',updated_on='$updated_on'";$table_query = "UPDATE $table SET $table_fields_values WHERE id='$id'";if (mysqli_query($con, $table_query)) {echo "<script>alert('Record No.$id is Updated successfully to $table');window.location.href='dashboard.php?crud_$table';</script>";} else {echo "<script>alert('ERROR: 001 - This record can't be added ...');window.location.href='dashboard.php?page=crud_$table';</script>";}break;case 'delete':$table_query = "DELETE FROM ipd_general_master WHERE patient_id='".$id."'";if (mysqli_query($con, $table_query)) {echo "<script>alert('Record No. $id is deleted successfully from $table master');window.location.href='dashboard.php?page=crud_$table';</script>";}else {echo "<script>alert('ERROR: 001 - This record can't be added ...');window.location.href='dashboard.php?page=crud_$table';</script>";}break;default: echo "Program Entered into DEFAULT";}}?><!-- Content Header (Page header) --><section class="content-header"><h1>Master Records<small>Preview</small></h1><ol class="breadcrumb"><li><a href="dashboard.php"><i class="fa fa-dashboard"></i> Home</a></li><li class="active"><?php echo $table; ?> Master Records </li></ol></section><section class="content"><div class="row"><div class="col-md-12"><!------CONTROL TABS START------><div class="nav-tabs-custom"><ul class="nav nav-tabs pull-right"><li><button class="btn btn-block btn-info" href="import.php?action=import&table=<?php echo $table; ?>" target="_blank"><i class="fa fa-upload"></i>&nbsp;&nbsp;Import</button>&nbsp;&nbsp;<li><li><button class="btn btn-block btn-warning" href="printpdf.php?action=print&table=<?php echo $table; ?>" target="_blank"><i class="fa fa-file-pdf-o"></i>&nbsp;&nbsp;PDF</button>&nbsp;&nbsp;<li><li><button class="btn btn-block btn-primary" href="export.php?action=export&table=<?php echo $table; ?>" target="_blank"><i class="fa fa-file-excel-o"></i>&nbsp;&nbsp;CSV</button>&nbsp;&nbsp;</li><li><a href="#add" data-toggle="tab" class="btn bg-green-active"><i class="fa fa-plus-square"></i>&nbsp;&nbsp;New <?php echo $table; ?></a></li><li class="active"><a href="#list" data-toggle="tab" class="btn bg-primary"><i class="fa fa-list"></i>&nbsp;&nbsp;<?php echo $table; ?> List </a></li><li class="pull-left header"><i class="fa fa-th"></i> Manage <?php echo $table; ?><li></ul><!------CONTROL TABS END------><div class="tab-content"><!----TABLE LISTING STARTS--><div class="tab-pane active" id="list"><section class="content"><div class="row"><div class="box border-top-solid"><div class="box-body table-responsive"><table id="example1" class="table table-bordered table-striped "><thead><tr><th>patient_id</th><th>ipd_gen_status</th><th>ipd_admission_date</th><th>bed_allocation_id</th><th>operation_reqd</th><th>ipd_operation_ref_id</th><th>ipd_attending_doctor_id</th><th>ipd_gen_staff_list</th><th>ipd_daily_rec_idlist</th><th>ipd_discharge_date</th><th>ipd_discharge_notes</th><th>created_by</th><th>created_on</th><th>updated_by</th><th>updated_on</th><th style="width: 100px;" class="text-right">Option</th></tr></thead><?php require_once 'connection.php';$table_query="SELECT * FROM ".$table;$result=  mysqli_query($con, $table_query);while ($tresult_array = mysqli_fetch_array($result)) {echo "<tr>";echo "<td>".$tresult_array['patient_id']."</td>";echo "<td>".$tresult_array['ipd_gen_status']."</td>";echo "<td>".$tresult_array['ipd_admission_date']."</td>";echo "<td>".$tresult_array['bed_allocation_id']."</td>";echo "<td>".$tresult_array['operation_reqd']."</td>";echo "<td>".$tresult_array['ipd_operation_ref_id']."</td>";echo "<td>".$tresult_array['ipd_attending_doctor_id']."</td>";echo "<td>".$tresult_array['ipd_gen_staff_list']."</td>";echo "<td>".$tresult_array['ipd_daily_rec_idlist']."</td>";echo "<td>".$tresult_array['ipd_discharge_date']."</td>";echo "<td>".$tresult_array['ipd_discharge_notes']."</td>";echo "<td>".$tresult_array['created_by']."</td>";echo "<td>".$tresult_array['created_on']."</td>";echo "<td>".$tresult_array['updated_by']."</td>";echo "<td>".$tresult_array['updated_on']."</td>";echo "<td class='text-right'>";echo "<a href='dashboard.php?page=crud_ipd_general_master&action=edit&id=".$tresult_array['patient_id']."' class='btn btn-info btn-flat btn-xs'>Edit</a>";echo "<a onclick='return delFunction();' href='dashboard.php?page=crud_ipd_general_master&action=delete&id=".$tresult_array['patient_id']."' class='btn btn-warning btn-flat btn-xs'>Delete</a>";echo "</td>";echo "</tr>";} ?></tbody></table></div></div><!-- /.box-body --><div class="box-footer"><button type="reset" onclick="window.location.href = 'dashboard.php';" class="btn btn-warning"><i class="fa fa-arrow-circle-o-left">  </i> Back</button></div></div></section></div><!----TABLE LISTING ENDS---><!----CREATION FORM STARTS----><div class="tab-pane" id="add" style="padding: 5px"><!-- Horizontal Form --><div class="box box-info"><div class="box-header with-border"><h3 class="box-title">New <?php echo $table; ?> Form</h3></div><!-- /.box-header --><!-- form start --><form class="form-horizontal" action="dashboard.php?page=crud_ipd_general_master" method="post"><div class="box-body"><div class="form-group"><label for='ipd_general_master-patient_id' class='col-sm-2 control-label'>patient_id</label><div class="col-sm-10"><input class="form-control" type="text" name="patient_id" id="patient_id"></div></div><div class="form-group"><label for='ipd_general_master-ipd_gen_status' class='col-sm-2 control-label'>ipd_gen_status</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_gen_status" id="ipd_gen_status"></div></div><div class="form-group"><label for='ipd_general_master-ipd_admission_date' class='col-sm-2 control-label'>ipd_admission_date</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_admission_date" id="ipd_admission_date"></div></div><div class="form-group"><label for='ipd_general_master-bed_allocation_id' class='col-sm-2 control-label'>bed_allocation_id</label><div class="col-sm-10"><input class="form-control" type="text" name="bed_allocation_id" id="bed_allocation_id"></div></div><div class="form-group"><label for='ipd_general_master-operation_reqd' class='col-sm-2 control-label'>operation_reqd</label><div class="col-sm-10"><input class="form-control" type="text" name="operation_reqd" id="operation_reqd"></div></div><div class="form-group"><label for='ipd_general_master-ipd_operation_ref_id' class='col-sm-2 control-label'>ipd_operation_ref_id</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_operation_ref_id" id="ipd_operation_ref_id"></div></div><div class="form-group"><label for='ipd_general_master-ipd_attending_doctor_id' class='col-sm-2 control-label'>ipd_attending_doctor_id</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_attending_doctor_id" id="ipd_attending_doctor_id"></div></div><div class="form-group"><label for='ipd_general_master-ipd_gen_staff_list' class='col-sm-2 control-label'>ipd_gen_staff_list</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_gen_staff_list" id="ipd_gen_staff_list"></div></div><div class="form-group"><label for='ipd_general_master-ipd_daily_rec_idlist' class='col-sm-2 control-label'>ipd_daily_rec_idlist</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_daily_rec_idlist" id="ipd_daily_rec_idlist"></div></div><div class="form-group"><label for='ipd_general_master-ipd_discharge_date' class='col-sm-2 control-label'>ipd_discharge_date</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_discharge_date" id="ipd_discharge_date"></div></div><div class="form-group"><label for='ipd_general_master-ipd_discharge_notes' class='col-sm-2 control-label'>ipd_discharge_notes</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_discharge_notes" id="ipd_discharge_notes"></div></div><div class="form-group"><label for='ipd_general_master-created_by' class='col-sm-2 control-label'>created_by</label><div class="col-sm-10"><input class="form-control" type="text" name="created_by" id="created_by"></div></div><div class="form-group"><label for='ipd_general_master-created_on' class='col-sm-2 control-label'>created_on</label><div class="col-sm-10"><input class="form-control" type="text" name="created_on" id="created_on"></div></div><div class="form-group"><label for='ipd_general_master-updated_by' class='col-sm-2 control-label'>updated_by</label><div class="col-sm-10"><input class="form-control" type="text" name="updated_by" id="updated_by"></div></div><div class="form-group"><label for='ipd_general_master-updated_on' class='col-sm-2 control-label'>updated_on</label><div class="col-sm-10"><input class="form-control" type="text" name="updated_on" id="updated_on"></div></div></div><!-- /.box-body --><div class="box-footer"><button type="reset" onclick="window.location.href = 'dashboard.php';" class="btn btn-warning"><i class="fa fa-ban">  </i> Cancel</button><button type="submit" class="btn btn-info pull-right" name="submit"><i class="fa fa-database">  </i> Save New <?php echo $table; ?> Record</button></div><!-- /.box-footer --></form></div><!-- /.box --></div><!----CREATION FORM ENDS--></div></div></div></div></section> <!-- Edit Modal Starts Here --><div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel">ipd_general_master Update</h4></div><div class="modal-body"><form class="form-horizontal" role="form" action="dashboard.php?page=crud_ipd_general_master&action=edit" method="post"><div class="form-group"><label for='ipd_general_master-patient_id' class='col-sm-2 control-label'>patient_id</label><div class="col-sm-10"><input class="form-control" type="text" name="patient_id" id="patient_id"  readonly></div></div><div class="form-group"><label for='ipd_general_master-ipd_gen_status' class='col-sm-2 control-label'>ipd_gen_status</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_gen_status" id="ipd_gen_status"></div></div><div class="form-group"><label for='ipd_general_master-ipd_admission_date' class='col-sm-2 control-label'>ipd_admission_date</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_admission_date" id="ipd_admission_date"></div></div><div class="form-group"><label for='ipd_general_master-bed_allocation_id' class='col-sm-2 control-label'>bed_allocation_id</label><div class="col-sm-10"><input class="form-control" type="text" name="bed_allocation_id" id="bed_allocation_id"></div></div><div class="form-group"><label for='ipd_general_master-operation_reqd' class='col-sm-2 control-label'>operation_reqd</label><div class="col-sm-10"><input class="form-control" type="text" name="operation_reqd" id="operation_reqd"></div></div><div class="form-group"><label for='ipd_general_master-ipd_operation_ref_id' class='col-sm-2 control-label'>ipd_operation_ref_id</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_operation_ref_id" id="ipd_operation_ref_id"></div></div><div class="form-group"><label for='ipd_general_master-ipd_attending_doctor_id' class='col-sm-2 control-label'>ipd_attending_doctor_id</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_attending_doctor_id" id="ipd_attending_doctor_id"></div></div><div class="form-group"><label for='ipd_general_master-ipd_gen_staff_list' class='col-sm-2 control-label'>ipd_gen_staff_list</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_gen_staff_list" id="ipd_gen_staff_list"></div></div><div class="form-group"><label for='ipd_general_master-ipd_daily_rec_idlist' class='col-sm-2 control-label'>ipd_daily_rec_idlist</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_daily_rec_idlist" id="ipd_daily_rec_idlist"></div></div><div class="form-group"><label for='ipd_general_master-ipd_discharge_date' class='col-sm-2 control-label'>ipd_discharge_date</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_discharge_date" id="ipd_discharge_date"></div></div><div class="form-group"><label for='ipd_general_master-ipd_discharge_notes' class='col-sm-2 control-label'>ipd_discharge_notes</label><div class="col-sm-10"><input class="form-control" type="text" name="ipd_discharge_notes" id="ipd_discharge_notes"></div></div><div class="form-group"><label for='ipd_general_master-created_by' class='col-sm-2 control-label'>created_by</label><div class="col-sm-10"><input class="form-control" type="text" name="created_by" id="created_by"></div></div><div class="form-group"><label for='ipd_general_master-created_on' class='col-sm-2 control-label'>created_on</label><div class="col-sm-10"><input class="form-control" type="text" name="created_on" id="created_on"></div></div><div class="form-group"><label for='ipd_general_master-updated_by' class='col-sm-2 control-label'>updated_by</label><div class="col-sm-10"><input class="form-control" type="text" name="updated_by" id="updated_by"></div></div><div class="form-group"><label for='ipd_general_master-updated_on' class='col-sm-2 control-label'>updated_on</label><div class="col-sm-10"><input class="form-control" type="text" name="updated_on" id="updated_on"></div></div><button type="submit" class="btn btn-primary">Submit for Updation</button></form></div></div><!-- /.modal-content --></div><!-- /.modal-dialog --></div><!-- /.modal --><script src="../assets/js/jquery.min.js"></script><script src="../assets/js/bootstrap.min.js"></script><script>$(document).on("click", ".ipd_general_mastereditDialog", function (e) { e.preventDefault();var _self = $(this);var myData = _self.data('id');$("#Id").val(myData);0$("#patient_id").val(res[0]);$("#ipd_gen_status").val(res[1]);$("#ipd_admission_date").val(res[2]);$("#bed_allocation_id").val(res[3]);$("#operation_reqd").val(res[4]);$("#ipd_operation_ref_id").val(res[5]);$("#ipd_attending_doctor_id").val(res[6]);$("#ipd_gen_staff_list").val(res[7]);$("#ipd_daily_rec_idlist").val(res[8]);$("#ipd_discharge_date").val(res[9]);$("#ipd_discharge_notes").val(res[10]);$("#created_by").val(res[11]);$("#created_on").val(res[12]);$("#updated_by").val(res[13]);$("#updated_on").val(res[14]);$(_self.attr('href')).modal('show');});</script><script> function delFunction() { return confirm("Do you want to delete this record?");}</script><script>$(function () {$("#example1").DataTable();});</script>